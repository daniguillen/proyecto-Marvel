(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[9991],{843494:e=>{var t,i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinCardVisual_pin",selections:[t={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[t,{alias:null,args:null,kind:"ScalarField",name:"layout",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shouldOpenInStream",storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"pageCount",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"staticPageCount",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalVideoDuration",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null}],type:"Pin",abstractKey:null};i.hash="1308be90d392c904689e70291c257f9a",e.exports=i},524861:e=>{var t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinVideoWithVisibility_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isDownstreamPromotion",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"promoter",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"PinVideo_pin"}],type:"Pin",abstractKey:null,hash:"27c8b43bacc2cae28ba09e1e523f1e58"};e.exports=t},365885:e=>{var t,i,a,n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinVideo_pin",selections:[t={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isDownstreamPromotion",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForWebCloseup",storageKey:null},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[i={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'images(spec:"236x")'},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"videos",plural:!1,selections:[t,{alias:null,args:null,concreteType:"VideoList",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vHLSV4",plural:!1,selections:a=[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"thumbnail",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},i],storageKey:null},{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"v720P",plural:!1,selections:a,storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"promoter",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};n.hash="f981fc372a34e44de18f6295d8e914c3",e.exports=n},310227:(e,t,i)=>{i.d(t,{Dv:()=>s,Ml:()=>o,Oc:()=>a,mv:()=>n});const a=16,n=4,s={SAVED:"rgba(0, 0, 0, 0.33)",VISUAL:"rgba(0, 0, 0, 0.1)",LEGO_WASH:"rgba(0, 0, 0, 0.4)"},o=120},81226:(e,t,i)=>{function a(e){const t=Math.round(e/1e3),i=t%60;return Math.floor(t/60)+":"+(i<10?"0":"")+i}i.d(t,{Z:()=>a})},903095:(e,t,i)=>{i.d(t,{Mi:()=>n,lO:()=>s});var a=i(425288);const{Provider:n,useMaybeHook:s}=(0,a.Z)("pageContext")},627995:(e,t,i)=>{i.d(t,{Z:()=>c});var a=i(927104),n=i(898781),s=i(903095),o=i(112690),r=i(883119),l=i(785893);const d=(e,t)=>{let i={};if(e){const{pinData:a,viewData:n}=e;i={unauth_click_pin_id:a.id,unauth_click_pin_image_signature:a.imageSignature},3===t?i={...i,unauth_page_pin_id:n.id,unauth_page_pin_image_signature:n.imageSignature}:5===t&&(i={...i,unauth_page_board_id:n.id})}return i},c=({clickLoggingOptions:e,domain:t,link:i,onClick:c})=>{var u;const h=null===(u=(0,s.lO)())||void 0===u?void 0:u.logging,p=(0,n.ZP)(),m=(0,o.Z)(),y=()=>[{event_type:8948},{event_type:12},{event_type:101,element:0,aux_data:d(e.unauthRankingLoggingData,null==h?void 0:h.viewType)}].map((t=>({component:0,element:162,view_type:null==h?void 0:h.viewType,view_parameter:null==h?void 0:h.viewParameter,aux_data:e.auxData,object_id_str:e.auxData.objectId,...t})));return(0,l.jsx)(r.iP,{onTap:({event:e})=>{e.stopPropagation(),y().forEach((e=>m(e))),c(e)},children:(0,l.jsxs)(r.xu,{marginBottom:4,marginStart:4,position:"absolute",display:"flex",justifyContent:"center",alignItems:"center",left:!0,bottom:!0,children:[(0,l.jsx)(r.xu,{marginEnd:1,children:(0,l.jsx)(r.JO,{size:9,icon:"arrow-up-right",color:"light",accessibilityLabel:p.bt("Enlace", "Link", "unauth.pin.domain.link", undefined, true)})}),(0,l.jsx)("a",{href:i,onClick:e=>{e.stopPropagation(),y().forEach((e=>m(e))),c(e)},rel:"nofollow noopener noreferrer",target:"_blank",type:"button",children:(0,l.jsx)(r.xv,{size:"200",inline:!0,weight:"bold",lineClamp:1,color:"inverse",children:(0,a.Z)(t,27)})})]})})}},46584:(e,t,i)=>{i.d(t,{Z:()=>r});var a=i(667294);const n=new Map;let s=null;const o=e=>{e.forEach((e=>{const t=n.get(e.target);t&&t(e)}))};function r({onVisibilityChanged:e,inAdsDesktopVideoExperiment:t,trackFullVisible:i,rootMargin:r}){const l=(0,a.useRef)(null);let d=!1;const c=()=>{var t;l.current instanceof HTMLElement&&(t=l.current,n.has(t))&&(d&&(e(!1),d=!1))},u=(0,a.useCallback)((a=>{l.current instanceof HTMLElement&&((e,t="-64px 0px 0px 0px",i)=>{const a={root:"undefined"==typeof document?null:document.querySelector("#mainContainer"),rootMargin:t,threshold:[0,.5,1]};s=s||new window.IntersectionObserver(o,a),n.set(e,i),s.observe(e)})(l.current,a,(a=>{if(!n.has(l.current))return;const s=t?a.intersectionRatio>=.5:a.intersectionRatio>0||a.isIntersecting,o=i?a.intersectionRatio>=1:s,r=i?0===a.intersectionRatio:!o;!d&&o?(t=>{const i=t.intersectionRatio>0||t.isIntersecting;d=i,d&&e(!0)})(a):d&&r&&c()}))}),[l.current]);return(0,a.useEffect)((()=>(u(r),()=>{var e;l.current instanceof HTMLElement&&(c(),e=l.current,s.unobserve(e),n.delete(e))})),[u]),l}},562559:(e,t,i)=>{i.d(t,{Z:()=>S});var a=i(667294),n=i(867631),s=i.n(n),o=i(112690),r=i(19121),l=i(965900),d=i(773285),c=i(780280),u=i(883119),h=i(969315),p=i(179888),m=i(858416),y=i(785893);function g(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const v=(e,t)=>{if(t){const i="control"===t?"v3.pinimg.com":"v2.pinimg.com";return e.replace("v1.pinimg.com",i)}return e},b=(e,t)=>"string"==typeof e?v(e,t):Array.isArray(e)?((e,t)=>e[0].src&&t?[{...e[0],src:v(e[0].src,t)}]:e)(e,t):e;class P extends a.PureComponent{constructor(...e){super(...e),g(this,"state",{canPlayVideo:!1,isManifestParsed:!1,playbackState:p.Cy.DEFAULT,videoStartTime:this.props.seekTime||0}),g(this,"errorRetryCount",1),g(this,"firstFragBuffered",!1),g(this,"hasPlaybackStarted",!1),g(this,"hasVideoSessionStarted",!1),g(this,"hasVideoSessionEnded",!1),g(this,"hls",null),g(this,"fragStartupTime",{}),g(this,"lastLevelSwitchKbps",null),g(this,"lastStallTime",null),g(this,"lastPauseTime",null),g(this,"logSessionStartOnNextPlay",!1),g(this,"playerId",""),g(this,"videoSessionId",""),g(this,"videoVisibleTime",null),g(this,"playbackPerformance",{canPlayTime:null,detailedErrors:"",downloadedKiloBytes:0,errorCode:0,errorName:"",errorReason:"",hasFatalError:!1,loadStartTime:null,numberOfStalls:0,numberOfSeeks:0,playbackStartTimestamp:null,segments:[],srcString:"string"==typeof this.props.src?v(this.props.src,this.props.quicExpGroup):v(this.props.src[0].src,this.props.quicExpGroup),totalStallDurationMs:0,totalPauseDurationMs:0,videoCreatedTime:null}),g(this,"initializeHls",(()=>{this.destroyHls();const{src:e,hlsConfig:t,quicExpGroup:i}=this.props,a=new(s())(t),n=b(e,i);a.loadSource(n),this.videoPlayerRef&&a.attachMedia(this.videoPlayerRef.video),a.on(s().Events.FRAG_BUFFERED,this.handleHlsFragBuffered),a.on(s().Events.FRAG_CHANGED,this.handleHlsFragChanged),a.on(s().Events.FRAG_LOADING,this.handleHlsFragLoading),a.on(s().Events.FRAG_LOADED,this.handleHlsFragLoaded),a.on(s().Events.MANIFEST_PARSED,(()=>{this.setState({isManifestParsed:!0})})),a.on(s().Events.LEVEL_SWITCHED,this.handleHlsLevelSwitched),a.on(s().Events.ERROR,this.handleHlsError),this.hls=a})),g(this,"destroyHls",(()=>{const{hls:e}=this;e&&e.destroy()})),g(this,"addSegment",(e=>{const{segments:t}=this.playbackPerformance,i=t&&t[t.length-1];if(this.hls&&t.length&&i&&i.uri!==e.url){this.updateWatchDurationForCurrentSegment();const i=this.videoPlayerRef&&this.videoPlayerRef.video,a=this.hls&&this.hls.levels||{},n="number"==typeof e.level?a[e.level]:{},s=this.fragStartupTime[e.url];let o=-1;s&&s.startLoadTime&&s.endLoadTime&&(o=s.endLoadTime-s.startLoadTime);const r={indicatedKbps:n.bitrate/p.bR,duration:e.duration,level:e.level,lastStartPlayTime:this.getCurrentVideoTime(),numServerAddressChange:-1,observedKbps:this.hls&&this.hls.bandwidthEstimate/p.bR||-1,playbackStartDate:Date.now(),serverAddress:"",sn:e.sn,sourceWidth:n.width,sourceHeight:n.height,startupTimeMs:o,switchBitrateKbps:this.lastLevelSwitchKbps||-1,uri:e.url,viewportWidth:i&&i.clientWidth||-1,viewportHeight:i&&i.clientHeight||-1,watchedDurationMs:0};t.push(r)}})),g(this,"initializeSegments",(e=>{const{contextLogData:t={}}=this.props,{is_closeup_video:i=!1}=t,{segments:a}=this.playbackPerformance;if(!a.length)if(this.hls&&this.videoPlayerRef&&this.videoPlayerRef.video&&e){if(!a.length&&"number"==typeof e.level){const t=this.videoPlayerRef&&this.videoPlayerRef.video,i=this.hls.levels,n="number"==typeof e.level?i[e.level]:{},s=this.fragStartupTime[e.url];let o=-1;s&&s.startLoadTime&&s.endLoadTime&&(o=s.endLoadTime-s.startLoadTime),this.lastLevelSwitchKbps=this.hls.bandwidthEstimate/p.bR;const r={indicatedKbps:n.bitrate/p.bR,duration:e.duration,level:e.level,lastStartPlayTime:null,numServerAddressChange:-1,observedKbps:this.hls.bandwidthEstimate/p.bR||-1,playbackStartDate:null,serverAddress:"",sn:e.sn,sourceWidth:n.width,sourceHeight:n.height,startupTimeMs:o,switchBitrateKbps:this.lastLevelSwitchKbps||-1,uri:e.url,viewportWidth:t.clientWidth,viewportHeight:t.clientHeight,watchedDurationMs:0};a.push(r)}}else(0,h.tE)("initializeSegmentsFailed",!0,i)})),g(this,"getCurrentVideoTime",(()=>this.videoPlayerRef&&this.videoPlayerRef.video?this.videoPlayerRef.video.currentTime*p.gJ:null)),g(this,"handleCanPlayVideo",(e=>{const{contextLogData:t={},onReady:i,playing:a}=this.props,{is_closeup_video:n=!1}=t,{canPlayVideo:s}=this.state;(0,h.tE)("handleCanPlayVideo",!0,n,{firstCanPlayEvent:!s,playing:a}),this.playbackPerformance.hasFatalError=!1,s||(this.playbackPerformance.canPlayTime=new Date),this.setState({canPlayVideo:!0}),i&&i(e)})),g(this,"handleEnded",(e=>{const{loop:t,onEnded:i}=this.props,{segments:a}=this.playbackPerformance,n=a&&a[a.length-1];t&&this.videoPlayerRef&&this.videoPlayerRef.video?(this.updateWatchDurationForCurrentSegment(),n&&(n.lastStartPlayTime=0),this.fragStartupTime={}):t||this.logPlaybackPerformance(p.$f,{initiator:"videoEnded",loop:t}),this.setState({playbackState:p.Cy.ENDED}),i&&i(e)})),g(this,"handleHlsError",((e,t)=>{var i;const{contextLogData:a={}}=this.props,{is_closeup_video:n=!1}=a;if(this.playbackPerformance.detailedErrors+=`${this.playbackPerformance.detailedErrors.length>0?", ":""}${t.details}`,t.fatal){var o,r,l,d;this.playbackPerformance.hasFatalError=!0,this.playbackPerformance.errorName=t.type,this.playbackPerformance.errorReason=t.details,this.playbackPerformance.errorCode=t.response&&t.response.code?t.response.code:0;const e={errorName:t.type,errorReason:t.details,errorRetryCount:this.errorRetryCount,errorMessage:(null===(o=t.err)||void 0===o||null===(r=o.message)||void 0===r?void 0:r.slice(0,50))||"unknown",errorResponse:(null===(l=t.response)||void 0===l||null===(d=l.text)||void 0===d?void 0:d.slice(0,50))||"unknown",playbackState:this.state.playbackState};if((0,h.tE)("fatalError",!0,n,e),this.errorRetryCount>0)switch(this.errorRetryCount-=1,t.type){case s().ErrorTypes.NETWORK_ERROR:if(t.details===s().ErrorDetails.MANIFEST_LOAD_ERROR||t.details===s().ErrorDetails.MANIFEST_LOAD_TIMEOUT||t.details===s().ErrorDetails.MANIFEST_LOAD_PARSING_ERROR){var c;const{src:e,quicExpGroup:t}=this.props,i=b(e,t);null===(c=this.hls)||void 0===c||c.loadSource(i)}else{var u;null===(u=this.hls)||void 0===u||u.startLoad()}break;case s().ErrorTypes.MEDIA_ERROR:null===(i=this.hls)||void 0===i||i.recoverMediaError()}}this.updateWatchDurationForCurrentSegment(),this.setState({playbackState:p.Cy.FAILED})})),g(this,"handleHlsFragBuffered",((e,t)=>{this.firstFragBuffered||(this.initializeSegments(t.frag),this.firstFragBuffered=!0)})),g(this,"handleHlsFragChanged",((e,t)=>{this.addSegment(t.frag)})),g(this,"handleHlsFragLoading",((e,t)=>{var i;const a=null===(i=t.frag)||void 0===i?void 0:i.url;a&&!this.fragStartupTime[a]&&(this.fragStartupTime[a]={startLoadTime:new Date})})),g(this,"handleHlsFragLoaded",((e,t)=>{var i;t.frag&&t.frag.loaded&&(this.playbackPerformance.downloadedKiloBytes+=t.frag.loaded/p.Fm);const a=null===(i=t.frag)||void 0===i?void 0:i.url;a&&this.fragStartupTime[a]&&this.fragStartupTime[a].startLoadTime&&(this.fragStartupTime[a].endLoadTime=new Date)})),g(this,"handleHlsLevelSwitched",(()=>{this.hls&&this.hls.bandwidthEstimate&&(this.lastLevelSwitchKbps=this.hls.bandwidthEstimate/p.bR)})),g(this,"handleLoadedMetadata",(()=>{this.setState({playbackState:p.Cy.LOADED_METADATA})})),g(this,"handleLoadStart",(()=>{this.playbackPerformance.loadStartTime=new Date,this.setState({playbackState:p.Cy.LOAD_START})})),g(this,"handleLoadedData",(()=>{this.setState({playbackState:p.Cy.LOADED_DATA})})),g(this,"handlePlaying",(()=>{this.playbackPerformance.hasFatalError=!1,this.setPlaybackStartTime(),this.setLastSegmentStartPlayTime(),this.setLastSegmentPlaybackStartDate(),this.updateStallDuration(),this.updatePauseDuration(),this.setState({playbackState:p.Cy.PLAYING}),this.props.clearSeekTime()})),g(this,"handleUserPause",(e=>{const{onControlsPause:t}=this.props;this.lastPauseTime=new Date,t&&t(e)})),g(this,"handleVideoPause",(()=>{this.state.playbackState!==p.Cy.STALLING&&this.state.playbackState!==p.Cy.SEEKING&&(this.updateWatchDurationForCurrentSegment(),this.lastPauseTime||this.updateStallDuration()),this.setState({playbackState:p.Cy.PAUSED})})),g(this,"handleSeeking",(()=>{this.playbackPerformance.numberOfSeeks+=1;const{segments:e}=this.playbackPerformance,t=e&&e[e.length-1];t&&(t.lastStartPlayTime=null),this.state.playbackState!==p.Cy.ENDED&&this.setState({playbackState:p.Cy.SEEKING})})),g(this,"handleStalled",(()=>{null===this.lastStallTime&&this.state.playbackState!==p.Cy.ENDED&&(this.lastStallTime=new Date,this.playbackPerformance.numberOfStalls+=1),this.setState({playbackState:p.Cy.STALLING})})),g(this,"handleTimeUpdate",(e=>{const{onTimeChange:t}=this.props;t&&t(e),this.state.playbackState===p.Cy.PLAYING&&(this.updateWatchDurationForCurrentSegment(),this.setLastSegmentStartPlayTime())})),g(this,"resetPlaybackMetrics",(()=>{this.hasPlaybackStarted=!1,this.hasVideoSessionStarted=!1,this.hasVideoSessionEnded=!0,this.lastLevelSwitchKbps=null,this.lastStallTime=null,this.lastPauseTime=null,this.videoSessionId="",this.videoVisibleTime=null,this.logSessionStartOnNextPlay=!1;const e={...this.playbackPerformance.segments[this.playbackPerformance.segments.length-1],lastStartPlayTime:null,playbackStartDate:null,switchBitrateKbps:-1,watchedDurationMs:0};this.playbackPerformance.detailedErrors="",this.playbackPerformance.downloadedKiloBytes=0,this.playbackPerformance.errorCode=0,this.playbackPerformance.errorName="",this.playbackPerformance.errorReason="",this.playbackPerformance.hasFatalError=!1,this.playbackPerformance.numberOfStalls=0,this.playbackPerformance.numberOfSeeks=0,this.playbackPerformance.playbackStartTimestamp=null,this.playbackPerformance.totalStallDurationMs=0,this.playbackPerformance.segments=[e]})),g(this,"setLastSegmentStartPlayTime",(()=>{const{segments:e}=this.playbackPerformance,t=e&&e[e.length-1];t&&null===t.lastStartPlayTime&&(t.lastStartPlayTime=this.getCurrentVideoTime())})),g(this,"setLastSegmentPlaybackStartDate",(()=>{const{segments:e}=this.playbackPerformance,t=e&&e[e.length-1];t&&null===t.playbackStartDate&&(t.playbackStartDate=Date.now())})),g(this,"setPlaybackStartTime",(()=>{this.hasPlaybackStarted||(this.playbackPerformance.playbackStartTimestamp=Date.now(),this.hasPlaybackStarted=!0)})),g(this,"setVideoPlayerRef",(e=>{const{setVideoRef:t}=this.props;if(e&&(t&&t(e),this.videoPlayerRef=e,this.videoPlayerRef.video)){const e=this.videoPlayerRef.video;e.addEventListener("loadedmetadata",this.handleLoadedMetadata),e.addEventListener("loadeddata",this.handleLoadedData),e.addEventListener("pause",this.handleVideoPause),e.readyState>=3&&(this.setState({canPlayVideo:!0}),this.playbackPerformance.canPlayTime=new Date)}})),g(this,"updateStallDuration",(()=>{null!==this.lastStallTime&&(this.playbackPerformance.totalStallDurationMs+=new Date-this.lastStallTime,this.lastStallTime=null)})),g(this,"updatePauseDuration",(()=>{if(null!==this.lastPauseTime){const e=this.lastPauseTime;this.playbackPerformance.totalPauseDurationMs+=new Date-e,this.lastPauseTime=null}})),g(this,"updateWatchDurationForCurrentSegment",(()=>{const{segments:e}=this.playbackPerformance,t=e&&e[e.length-1],i=t?t.lastStartPlayTime:null,a=this.getCurrentVideoTime();if(t&&null!==i&&"number"==typeof a&&"number"==typeof i){const e=a-i;e>0&&(t.watchedDurationMs+=e,t.lastStartPlayTime=null)}})),g(this,"logPlaybackPerformance",((e,t)=>{const{contextLogData:i={},userId:a,isAutoPlay:n,logContextEvent:s}=this.props,{is_closeup_video:o=!1}=i,{canPlayTime:r,detailedErrors:l,downloadedKiloBytes:d,errorCode:c,errorName:u,errorReason:m,hasFatalError:y,playbackStartTimestamp:g,totalPauseDurationMs:v,totalStallDurationMs:b,segments:P,srcString:S,loadStartTime:_,numberOfStalls:f,numberOfSeeks:k}=this.playbackPerformance,T=this.videoPlayerRef&&this.videoPlayerRef.video,w=e===p.DR,D=w&&!this.hasVideoSessionStarted,x=!w&&!this.hasVideoSessionEnded&&this.hasVideoSessionStarted;if(this.hls&&T&&(D||x)){var E;let D=-1;r&&_&&(D=r>_?r-_:0);let x=-1;r&&this.videoVisibleTime&&(x=r>this.videoVisibleTime?r-this.videoVisibleTime:0),w&&(this.videoSessionId=(0,p.Y7)(a),this.playerId=this.playerId||(0,p.EB)());const L={autoplaying:n,averageVideoKbps:-1,detailedErrors:l,downloadedKiloBytes:d,isCellular:!1,errorCode:c,errorName:u,errorReason:m,fatalError:y,nativeVideoDurationMs:T.duration*p.gJ||-1,numberOfStalls:f,numberOfSeeks:k,overallPausedDurationMs:v,overallBufferDurationMs:b,overallWatchedDurationMs:-1,rebufferRate:-1,playbackSessionId:this.videoSessionId,playbackStartTimestamp:g||-1,segments:[],sessionMark:e,screenPixelScale:null!==(E=window)&&void 0!==E&&E.devicePixelRatio?window.devicePixelRatio:-1,startupPlayerWidth:T.clientWidth,startupPlayerHeight:T.clientHeight,startupTimeMs:D,startupLatencyMs:x,startupVariantKbps:-1,startupVariantWatchedDurationMs:-1,startupVariantWidth:T.videoWidth,startupVariantHeight:T.videoHeight,videoUrl:S};if(!w&&P.length){const e=this.hls.levels,t=P[0];this.updateWatchDurationForCurrentSegment(),this.updateStallDuration();const i=P.reduce(((t,i)=>{if(i&&"number"==typeof i.level&&e&&e.length>0){return t+(e[i.level]||{}).bitrate*(i.watchedDurationMs||0)/p.gJ}return t}),0),a=P.reduce(((e,t)=>e+(t.watchedDurationMs||0)),0);let n=null,s=0,o=0;do{s+=P[o].watchedDurationMs,n=n||P[o].level,o+=1}while(o<P.length&&P[o].level===n);L.startupVariantKbps=t.indicatedKbps,L.startupVariantWatchedDurationMs=s,L.startupVariantWidth=t.sourceWidth,L.startupVariantHeight=t.sourceHeight,L.startupPlayerWidth=t.viewportWidth,L.startupPlayerHeight=t.viewportHeight,L.overallWatchedDurationMs=a,a>0?(L.averageVideoKbps=i/(a/p.gJ),L.rebufferRate=this.playbackPerformance.totalStallDurationMs/a):0===a&&(L.averageVideoKbps=-1,L.rebufferRate=-1,L.errorName="invalid_watch_duration"),L.segments=P}else L.errorName="invalid_watch_duration";(0,h.ZP)(L,!0,o,{playbackState:this.state.playbackState,...t});const{clientTrackingParams:C,component:I,durationNs:A,element:R,objectId:V,pairId:M,viewData:F,view:O,viewParameter:j,...z}=i;s({aux_data:{...z,is_closeup_video:o,playback_session_id:this.videoSessionId},clientTrackingParams:C,component:I,duration_ns:A,element:R,event_data:{videoPerformanceData:L},event_type:3606,object_id_str:V,pair_id:M,view_data:F,view_parameter:j,view_type:O}),w?(this.hasVideoSessionStarted=!0,this.hasVideoSessionEnded=!1):this.resetPlaybackMetrics(),(0,h.tE)(w?"sessionStart":"sessionEnd",!0,o,{playbackState:this.state.playbackState,...t})}}))}componentDidMount(){const{contextLogData:e={},playing:t}=this.props,{is_closeup_video:i=!1}=e;this.playbackPerformance.videoCreatedTime=new Date,this.initializeHls(),(0,h.tE)("videoMounted",!0,i),t&&(this.videoVisibleTime=new Date,this.logPlaybackPerformance(p.DR,{initiator:"mount"}))}componentDidUpdate(e){const{loop:t,playing:i,src:a,visible:n,appInFocus:s,seekTime:o}=this.props;var r,l;o&&o!==e.seekTime&&this.setState({videoStartTime:o}),(typeof(r=e.src)!=typeof(l=a)||(Array.isArray(l)?r.length!==l.length||l.some(((e,t)=>!Array.isArray(r)||e.type!==r[t].type||e.src!==r[t].src)):l!==r))&&this.initializeHls(),e.appInFocus&&!s&&(this.logPlaybackPerformance(p.$f,{initiator:"update",loop:t}),this.logSessionStartOnNextPlay=!0),e.visible&&!1===n&&(this.logSessionStartOnNextPlay=!1,this.updatePauseDuration(),this.logPlaybackPerformance(p.$f,{initiator:"update",loop:t})),!1===e.visible&&!0===n&&(this.videoVisibleTime=this.videoVisibleTime||new Date,i?(this.setPlaybackStartTime(),this.setLastSegmentStartPlayTime(),this.setLastSegmentPlaybackStartDate(),this.logPlaybackPerformance(p.DR,{initiator:"update"})):this.logSessionStartOnNextPlay=!0),i&&s&&this.logSessionStartOnNextPlay&&(this.setPlaybackStartTime(),this.setLastSegmentStartPlayTime(),this.setLastSegmentPlaybackStartDate(),this.logPlaybackPerformance(p.DR,{initiator:"update"}),this.logSessionStartOnNextPlay=!1)}componentWillUnmount(){const{loop:e}=this.props;this.updatePauseDuration(),this.logPlaybackPerformance(p.$f,{initiator:"unmount",loop:e}),this.destroyHls()}render(){const{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:i,accessibilityPauseLabel:a,accessibilityPlayLabel:n,accessibilityProgressBarLabel:s,accessibilityUnmuteLabel:o,aspectRatio:r,backgroundColor:l,captions:d,controls:c,loop:h,loopOverride:p,onDurationChange:m,onFullscreenChange:g,onLoadedChange:v,onControlsPlay:P,onPlayheadDown:S,onPlayheadUp:_,onSeek:f,onVolumeChange:k,playbackRate:T,playing:w,playsInline:D,poster:x,preload:E,quicExpGroup:L,src:C,volume:I}=this.props,{canPlayVideo:A,isManifestParsed:R,videoStartTime:V}=this.state,M=b(C,L);return(0,y.jsx)(u.nk,{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:i,accessibilityPauseLabel:a,accessibilityPlayLabel:n,accessibilityProgressBarLabel:s,accessibilityUnmuteLabel:o,aspectRatio:r,backgroundColor:l,captions:d,controls:c,loop:void 0===p?h:p,onDurationChange:m,onEnded:this.handleEnded,onFullscreenChange:g,onLoadStart:this.handleLoadStart,onLoadedChange:v,onControlsPause:this.handleUserPause,onControlsPlay:P,onPlaying:this.handlePlaying,onPlayheadDown:S,onPlayheadUp:_,onReady:this.handleCanPlayVideo,onSeek:f,onSeeking:this.handleSeeking,onStalled:this.handleStalled,onTimeChange:this.handleTimeUpdate,onVolumeChange:k,onWaiting:this.handleStalled,playbackRate:T,onPlay:()=>{},onPlayError:()=>{},playing:R&&A&&w,playsInline:D,poster:x,preload:E,ref:this.setVideoPlayerRef,src:M,startTime:V,volume:I})}}const S=(0,a.memo)((function(e){const{country:t,isAuthenticated:i,isBot:a,isSocialBot:n,unauthId:s,userAgent:u}=(0,c.B)(),p=(0,o.Z)(),g=(0,r.Z)(),{browserName:v,browserVersion:b,isMobile:S}=u,{contextLogData:_={}}=e,{is_closeup_video:f=!1,view:k,viewParameter:T}=_,{checkExperiment:w}=(0,d.F)(),{seekTime:D}=(0,m.Hx)(),{clearSeekTime:x}=(0,m.RC)();let E=null;i&&(E=w("web_video_quic").group.length?w("web_video_quic").group:null);const{appUI:L}=(0,l.I)(),C=w("web_video_fail_to_start_fix").anyEnabled?L.appInFocus:e.appInFocus,I={browserName:v,browserVersion:b,country:t,isAuthenticated:i,isBot:a,is_closeup_video:f,isMobile:S,isSocialBot:n,view:k,viewParameter:T};return(0,h.r$)(I),(0,y.jsx)(P,{...e,userId:g.id||s,appInFocus:C,quicExpGroup:E,logContextEvent:p,seekTime:D,clearSeekTime:x})}))},964082:(e,t,i)=>{function a(e,t){const{organicVideosAutoplaying:i,promotedVideosAutoplaying:a}=t,n={...i,...a};for(const s in n){const{paused:t}=n[s];if(s!==e&&!t)return!1}return!0}i.d(t,{Z:()=>a})},36971:(e,t,i)=>{function a(e,t){const{organicVideosAutoplaying:i,promotedVideosAutoplaying:a}=t,n={...i,...a};return n[e]&&n[e].currentTime}i.d(t,{Z:()=>a})},463045:(e,t,i)=>{function a(e,t){const{organicVideosAutoplaying:i,promotedVideosAutoplaying:a}=t,n={...i,...a};return!!n[e]&&!n[e].paused}i.d(t,{Z:()=>a})},969315:(e,t,i)=>{i.d(t,{ZP:()=>u,r$:()=>d,tE:()=>c});var a=i(311560),n=i(172071),s=i(179888);const o=["isCellular","videoUrl","sessionMark"];let r={},l="";const d=e=>{const{browserName:t,browserVersion:i,country:n,isAuthenticated:s,isBot:o,isMobile:d,isSocialBot:c,view:u="unknown",viewParameter:h="unknown"}=e;l=(c?"socialBot":o&&"bot")||"nonbot";const p=(0,a.Z)(n);r={browserName:t,browserVersion:(null==i?void 0:i.split(".")[0])||"0",isAuthenticated:s,isMobile:d,region:p,view:u,viewParameter:h}};function c(e,t,i,a={}){const s=i?"closeup":"nonCloseup",o=t?"hls":"nonHls",d={...a,...r},c=`web.video.${o}.${l}.${s}.${e}`;n.Z.increment(c,1,d)}function u(e,t,i,a={}){const d=i?"closeup":"nonCloseup",c=t?"hls":"nonHls",u=e.sessionMark===s.DR?"sessionStart":"sessionEnd",h={...a,...r};if(Object.entries(e).forEach((([t,i])=>{const a=`web.video.${c}.${l}.${d}.${u}.${t}`,s=parseInt(i,10),r="number"==typeof s?s:-1;var p;if(!o.includes(t))if(t.includes("fatalError")&&!0===i){const{errorCode:t,errorName:i,errorReason:s}=e;n.Z.increment(a,1,{errorCode:t,errorName:i,errorReason:s,...h})}else if(t.includes("Width")||t.includes("Height")){const e=(p=r)<0?"negative":0===p?"zero":p<200?"xs":p<400?"s":p<600?"m":p<800?"l":p<1e3?"xl":p<1200?"xxl":"over1200";n.Z.increment(a,1,{dimensionBucket:e,...h})}else if("numberOfStalls"===t){let e=i;r>1e3?e="over1000":r>10?e="over10":r<0&&(e="negative"),n.Z.increment(a,1,{numberOfStalls:e,...h})}else"screenPixelScale"===t?n.Z.increment(a,1,{screenPixelScale:i||-1,...h}):r>=0?(0===r&&n.Z.increment(`${a}.zero`,1,h),n.Z.timing(a,r,1),n.Z.timing(`${a}_with_tags`,r,1,h)):r<0&&n.Z.increment(`${a}.negative`,1,h)})),e.sessionMark!==s.DR){const{rebufferRate:t,screenPixelScale:i,startupLatencyMs:a,startupVariantWidth:s,startupPlayerWidth:o}=e,r=`web.video.${c}.${l}.${d}.${u}`;if("number"==typeof s&&"number"==typeof o&&"number"==typeof i){const e=1.5*s>i*o;n.Z.increment(`${r}.upscaled.${e?"good":"bad"}`,1,h)}"number"==typeof a&&n.Z.increment(`${r}.startupLatency.${a<500?"good":"bad"}`,1,h),"number"==typeof t&&n.Z.increment(`${r}.rebufferRate.${t<.01?"good":"bad"}`,1,h)}}},179888:(e,t,i)=>{i.d(t,{$f:()=>s,Cy:()=>d,DR:()=>n,EB:()=>h,Fm:()=>l,Y7:()=>u,bR:()=>r,gJ:()=>o,lG:()=>c});var a=i(172045);const n=1,s=2,o=1e3,r=1e3,l=1e3,d=Object.freeze({DEFAULT:0,LOAD_START:1,LOADED_METADATA:2,LOADED_DATA:3,PLAYING:4,PAUSED:5,SEEKING:6,STALLING:7,FAILED:8,ENDED:9}),c=Object.freeze({MEDIA_ERR_ABORTED:1,MEDIA_ERR_NETWORK:2,MEDIA_ERR_DECODE:3,MEDIA_ERR_SRC_NOT_SUPPORTED:4});function u(e){return e+"-"+(0,a.Z)()}function h(){return(0,a.Z)()}},121630:(e,t,i)=>{i.d(t,{Z:()=>s,e:()=>n});var a=i(81226);const n=e=>{if("undefined"==typeof window)return"";let t=0;const i=document.querySelector('[data-test-id="header"]');if(null!==i){const{height:e}=i.getBoundingClientRect();t+=e}switch(e){case"AuthHomefeed":const e=document.querySelector('[data-root-margin="more-ideas-tabs"]');if(null!==e){const{height:i}=e.getBoundingClientRect();t+=i}break;case"SearchItem":const i=document.querySelector('[data-root-margin="search-improvements-bar"]');if(null!==i){const{height:e}=i.getBoundingClientRect();t+=e}const a=document.querySelector('[data-test-id="search-tab-bar"],[data-root-margin="search-one-bar"]');if(null!==a){const{height:e}=a.getBoundingClientRect();t+=e}}return-1*t+"px 0px 0px 0px"},s=e=>{var t,i,n,s,o;return(0,a.Z)((null===(t=e.videos)||void 0===t?void 0:t.duration)||(null===(i=e.videos)||void 0===i||null===(n=i.video_list)||void 0===n||null===(s=n.V_HLSV4)||void 0===s?void 0:s.duration)||(null===(o=e.story_pin_data)||void 0===o?void 0:o.total_video_duration)||0)}},350445:(e,t,i)=>{i.d(t,{Z:()=>d});var a=i(898781),n=i(883119),s=i(785893);const o={__path:"M12 18.5A6.508 6.508 0 0 1 5.5 12c0-1.706.689-3.307 1.835-4.5H6.5a1 1 0 1 1 0-2h4.185v4.474a1 1 0 0 1-2 0V8.972A4.505 4.505 0 0 0 7.5 12c0 2.481 2.019 4.5 4.5 4.5s4.5-2.019 4.5-4.5a4.49 4.49 0 0 0-3.112-4.283 1 1 0 1 1 .615-1.902A6.482 6.482 0 0 1 18.5 12c0 3.584-2.916 6.5-6.5 6.5M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0"},r={__path:"M17.496 14.572a1 1 0 0 1-1 1h-.001a1.001 1.001 0 0 1-.999-1.001l.002-4.652-7.29 7.288a.995.995 0 0 1-.707.293.999.999 0 0 1-.707-1.707l7.293-7.29L9.428 8.5a1 1 0 0 1 .001-2h.001l8.071.005-.005 8.067zM12 0C5.373 0 0 5.373 0 12c0 6.628 5.373 12 12 12 6.628 0 12-5.372 12-12 0-6.627-5.372-12-12-12z"},l={overlay:{__style:{backgroundColor:"#000"}}};function d({backgroundImage:e,naturalHeight:t,naturalWidth:i,onRestartVideo:d,pinTitle:c,pinId:u}){const h=(0,a.ZP)();return(0,s.jsxs)(n.Ee,{alt:c||h.bt("imagen del Pin", "pin image", "image of a pin", undefined, true),naturalHeight:t,naturalWidth:i,src:e,children:[(0,s.jsx)(n.xu,{position:"absolute",top:!0,bottom:!0,left:!0,right:!0,opacity:.8,dangerouslySetInlineStyle:l.overlay}),(0,s.jsxs)(n.xu,{justifyContent:"center",direction:"column",display:"flex",position:"absolute",height:"100%",width:"100%","data-test-id":`video-end-card-${u}`,children:[(0,s.jsx)(n.iP,{rounding:2,children:(0,s.jsxs)(n.xu,{display:"flex",justifyContent:"center",padding:2,children:[(0,s.jsx)(n.JO,{accessibilityLabel:h.bt("Visitar sitio", "Visit site", "Button when pressed goes to pin's website", undefined, true),color:"light",dangerouslySetSvgPath:r,size:25}),(0,s.jsx)(n.xu,{margin:1}),(0,s.jsx)(n.xv,{color:"light",lineClamp:1,weight:"bold",children:h.bt("Visitar sitio", "Visit site", "Button when pressed goes to pin's website", undefined, true)})]})}),(0,s.jsx)(n.xu,{margin:3}),(0,s.jsx)(n.iP,{onTap:d,rounding:2,children:(0,s.jsxs)(n.xu,{display:"flex",justifyContent:"center",padding:2,children:[(0,s.jsx)(n.JO,{accessibilityLabel:h.bt("Ver de nuevo", "Watch again", "Button when pressed restarts the video", undefined, true),color:"light",dangerouslySetSvgPath:o,size:25}),(0,s.jsx)(n.xu,{margin:1}),(0,s.jsx)(n.xv,{color:"light",lineClamp:1,weight:"bold",children:h.bt("Ver de nuevo", "Watch again", "Button when pressed restarts the video", undefined, true)})]})})]})]})}},908662:(e,t,i)=>{i.d(t,{Z:()=>we});var a=i(667294),n=i(934494);var s=i(81226),o=i(702664),r=i(8320),l=i(977734),d=i(499128),c=i(898781),u=i(112690),h=i(927383),p=i(662089),m=i(52022),y=i(332611),g=i(639952),v=i(57791),b=i(881802),P=i(698330),S=i(883119),_=i(276775),f=i(785893);const k=new S.Ry(1);function T({buttonText:e,clientTrackingParams:t,color:i="primary",deeplinkUri:n,experience:s,inline:T=!0,minWidth:w,onTouch:D,onUnsave:x,pinId:E,pinnedToBoardId:L,shape:C,shouldShowSavedButton:I,viewType:A,viewParameter:R,showSaveHandoffExperience:V}){var M;const F=(0,c.ZP)(),O=(0,o.useDispatch)(),j=(0,_.useHistory)(),z=(0,_.useLocation)().pathname.startsWith("/pin"),B=(0,o.useSelector)((({session:e})=>e.hasSavedUnauthPin)),N=(0,o.useSelector)((({session:e})=>e.unauthSavePinId)),H=null===(M=(0,P.Tt)())||void 0===M?void 0:M.pin_count,W=(0,u.Z)(),Z=(0,m.Z)(),U=e=>j.push(e),{showToast:K,showRepinConfirmation:G}=(0,p.Z)(),q=()=>{O((0,l.Z)({history:j,i18n:F,logContextEvent:W,onSuccess:()=>{s&&O((0,y.CK)(s.placement_id,s.experience_id))},originalPinId:E,pinId:E,trackingParams:{clientTrackingParams:t,pinnedToBoardId:L},showRepinConfirmation:V&&!z?()=>{}:G,disableRepinAnimation:N===E,pinCount:H,historyPush:U})).catch((e=>K((({hideToast:t})=>(0,f.jsx)(d.ZP,{type:"error",text:e.message||F.bt("¡Lo sentimos! Se ha producido un error en nuestros sistemas.", "Sorry! Something went wrong on our end.", "quickSave.toast.error.message", undefined, true),onHide:t})))))},$=(0,a.useRef)(null),Y=V&&!B,J=(0,h.Z)()({fn:e=>{e.stopPropagation(),e.preventDefault(),D&&D(e),I?I&&x&&x():q()},modalHeader:(0,b.Bx)(F)});(0,a.useEffect)((()=>{Y&&!$.current&&(Z({action:"trigger",item:"unauth-save-button-quicksave"}),q(),O((0,g.e2)())),$.current=Y}));const Q=()=>F.bt("Pin", "Pin", "quickSave.quickSaveButton.icon.accessibilityLabel", undefined, true),X=()=>e||F.bt("Guardar", "Save", "quickSave.quickSaveButton.buttonText", undefined, true);return B&&!z?null:(0,f.jsx)(S.xu,{"data-test-id":"save-button-mobile",zIndex:k,children:n?(0,f.jsx)(v.di,{accessibilityLabel:Q(),color:i,customStyles:{padding:"14px 16px"},deeplinkUri:n,inline:T,minHeight:48,minWidth:w,onTouch:J,pressState:["compress","background"],shape:C,size:"lg",text:X(),to:j.location.pathname,upsellType:"save",viewType:A,viewParameter:R}):(0,f.jsx)(r.Z,{accessibilityLabel:Q(),color:i,customStyles:{padding:"14px 16px"},inline:T,minHeight:48,minWidth:w,onTouch:J,pressState:"compress",shape:C,size:"300",text:X()})})}var w=i(364034),D=i(139574),x=i(826067),E=i(850431),L=i(867820),C=i(50286),I=i(780280),A=i(177891),R=i(343341);function V(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class M extends a.PureComponent{constructor(...e){var t;super(...e),t=this,V(this,"state",{saveState:void 0}),V(this,"legoFixedZIndex",new S.Ry(2)),V(this,"onAddPin",(async function(){const{clientTrackingParams:e,dispatch:i,i18n:a,oneTapSave:n,pinId:s,pinnedToBoardId:o,showToast:r,viewType:l,historyPush:c}=t.props;try{const a=await i((0,E.w)({i18n:t.props.i18n,logContextEvent:t.props.logContextEvent,originalPinId:s,pinId:s,boardId:null==n?void 0:n.boardId,isOneTapSave:!0,onUndo:()=>{t.onDeletePin()},section:null==n?void 0:n.section,showToast:r,trackingParams:{clientTrackingParams:e,pinnedToBoardId:o},viewType:l,historyPush:c}));t.setState({saveState:"saved"}),i((0,A.a)({boardId:null==n?void 0:n.boardId,localPinId:a.id,pinId:s}))}catch(u){r((({hideToast:e})=>(0,f.jsx)(d.ZP,{type:"error",text:u.message||a.bt("¡Lo sentimos! Se ha producido un error en nuestros sistemas.", "Sorry! Something went wrong on our end.", "error during repin", undefined, true),onHide:e}))),t.setState({saveState:void 0})}})),V(this,"onDeletePin",(async function(){const{dispatch:e,clientTrackingParams:i,i18n:a,pinId:n,savedInfo:s,showToast:o}=t.props;if(s){e((0,A.k)({boardId:s.boardId,localPinId:s.localPinId,pinId:n}));try{await e((0,D.q)({pinId:s.localPinId,boardId:s.boardId,clientTrackingParams:i})),o((({hideToast:e})=>(0,f.jsx)(d.ZP,{text:a.bt("¡Pin eliminado!", "Pin deleted!", "User deleted their pin", undefined, true),onHide:e}))),t.setState({saveState:void 0})}catch(r){o((({hideToast:e})=>(0,f.jsx)(d.ZP,{type:"error",text:a.bt("¡Lo sentimos! Se produjo un error al intentar eliminar tu Pin.", "Sorry! There was an error deleting your Pin.", "Error when user tried to delete pin", undefined, true),onHide:e}))),t.setState({saveState:"saved"})}}})),V(this,"handlePinAction",this.props.requireAuthForLimitedLogin({fn:({event:e})=>{e.stopPropagation(),e.preventDefault();const{saveState:t}=this.state,{history:i,pinId:a,isOneTapExploreLocalTab:n,pinnedToBoard:s}=this.props;["saving","deleting"].includes(t)||n&&s||(t||this.props.savedInfo?this.props.isOneTapExploreLocalTab||(this.setState({saveState:"deleting"}),this.onDeletePin()):(this.setState({saveState:"saving"}),n?i.push({pathname:`/pin/${a}/repin`,state:{isOneTapSave:!0}}):this.onAddPin()))},modalHeader:(0,b.Bx)(this.props.i18n)})),V(this,"shouldDisplayAsSaved",(({isOneTapExploreLocalTab:e,pinnedToBoard:t,savedInfo:i})=>e?!!t:!!i))}render(){const{children:e,clientTrackingParams:t,homepageExperience:i,i18n:n,isOneTapExploreLocalTab:s,isRTL:o,oneTapSave:r,pinId:l,pinnedToBoard:d,pinnedToBoardId:c,savedInfo:u,shouldShowSaveHandoffExp:h,useSmallSaveIcon:p}=this.props;if(!r&&!s&&!h)return e;const m=this.shouldDisplayAsSaved({isOneTapExploreLocalTab:s,pinnedToBoard:d,savedInfo:u}),y="#000",g="rgba(255, 255, 255, 0.8)",v="light",b="dark";return(0,f.jsxs)(a.Fragment,{children:[e,(0,f.jsx)(S.xu,{bottom:!0,left:o,padding:2,position:"absolute",right:!o,zIndex:this.legoFixedZIndex,children:h?(0,f.jsx)(T,{buttonText:d?n.bt("Guardado", "Saved", "OneTapSave.QuickSaveButton.Saved", undefined, true):"",clientTrackingParams:t,color:d?"default":"primary",deeplinkUri:"deeplinkUri",experience:i,inline:!0,pinnedToBoardId:c,minWidth:54,pinId:l,shape:"pill",shouldShowSavedButton:!!d,showSaveHandoffExperience:h}):(0,f.jsx)(S.iP,{onTap:this.handlePinAction,rounding:"circle",children:(0,f.jsx)(S.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:m?y:g}},padding:2,rounding:"circle",children:(0,f.jsx)(S.xu,{dangerouslySetInlineStyle:{__style:{opacity:100}},children:(0,f.jsx)(S.JO,{accessibilityLabel:m?n.bt("guardado", "saved", "checkmark icon to show pin has been saved", undefined, true):n.bt("guardar", "save", "button for saving quickly with one click", undefined, true),icon:m?"check":"add",color:m?v:b,size:p?16:24})})})})})]})}}const F=(0,o.connect)(((e,{pinId:t})=>({savedInfo:e.pins[t]&&e.pins[t].savedInfo,pinnedToBoard:e.pins[t]&&e.pins[t].pinned_to_board,homepageExperience:e.experiences[40001]})))((function(e){const{showToast:t}=(0,R.F9)(),i=(0,_.useLocation)(),n=(0,c.ZP)(),s=(0,u.Z)(),r=(0,h.Z)(),d=(0,o.useDispatch)(),p=(0,_.useHistory)(),{isRTL:m,isAuthenticated:y}=(0,I.B)(),g=(0,o.useSelector)((({session:e})=>e.unauthSavePinId)),v=y&&!!g&&g===e.pinId,{pins:b,clear:P}=(0,w.Z)(),S=(0,a.useRef)(!1),k=(0,x.mB)(i.search).ideas_referrer,T=!(0,C.HG)()&&k===String(25),D=e=>p.push(e);return(0,a.useEffect)((()=>{y&&!S.current&&b.length>0&&(S.current=!0,b.forEach((({id:e})=>{d((0,l.Z)({history:p,i18n:n,logContextEvent:s,onSuccess:()=>{},originalPinId:e,pinId:e,trackingParams:{clientTrackingParams:"",pinnedToBoardId:""},showRepinConfirmation:()=>{},disableRepinAnimation:!0,historyPush:D})).catch((e=>{(0,L.My)(`error.unauth_profile_pin_merge.${e}`)}))})),P())})),(0,f.jsx)(M,{...e,i18n:n,requireAuthForLimitedLogin:r,history:p,logContextEvent:s,showToast:t,shouldShowSaveHandoffExp:v,isRTL:m,historyPush:D,useSmallSaveIcon:T})}));F.displayName="OneTapSave";const O=F;var j=i(883561),z=i(349700);function B({boardUrl:e,boardName:t,isQuicksave:i,sectionName:a,sectionSlug:n}){const s=(0,c.ZP)(),o=(0,_.useHistory)(),r=new S.Ry(1),l=!!n&&`${e}${n}/`;return(0,f.jsx)(S.xu,{position:"absolute",top:!0,bottom:!0,left:!0,right:!0,zIndex:r,dangerouslySetInlineStyle:{__style:{background:"rgb(0 0 0 / .4)"}},children:(0,f.jsx)(S.xu,{position:"absolute",top:!0,bottom:!0,left:!0,right:!0,display:"flex",justifyContent:"center",alignItems:"start",padding:4,children:(0,f.jsx)(S.iP,{onTap:t=>{t.event.preventDefault(),o.push(i?"/me/":l||e)},children:(0,f.jsx)(S.xv,{color:"light",children:a?(0,z.nk)(s.bt("Guardado en {{sectionName}}", "Saved to {{sectionName}}", "PinCard.SavedToSection.Overlay", undefined, true),{sectionName:(0,f.jsx)(S.xv,{color:"light",weight:"bold",inline:!0,children:(0,j.ZP)(a,22)},`pincard-${a}`)}):(0,z.nk)(s.bt("Guardado en {{boardName}}", "Saved to {{boardName}}", "PinCard.SavedToBoard.Overlay", undefined, true),{boardName:(0,f.jsx)(S.xv,{color:"light",weight:"bold",inline:!0,children:i?s.bt("Perfil", "Profile", "PinCard.SavedToProfile.Overlay", undefined, true):(0,j.ZP)(t,22)},`pincard-${t}`)})})})})})}var N=i(167525),H=i(964082),W=i(36971),Z=i(463045);function U({isSquarePin:e,color:t,description:i,imageUrl:a,imageHeight:n,imageWidth:s,onError:o,onLoad:r}){const l=(0,f.jsx)(S.Ee,{alt:i||"",color:t,naturalHeight:null!=n?n:1,naturalWidth:null!=s?s:1,onError:o,onLoad:r,src:null!=a?a:"",fit:e?"cover":void 0});return e?(0,f.jsx)(S.xu,{dangerouslySetInlineStyle:{__style:{paddingTop:"calc(100%)"}},children:(0,f.jsx)(S.xu,{top:!0,right:!0,bottom:!0,left:!0,position:"absolute",dangerouslySetInlineStyle:{__style:{WebkitMaskImage:"-webkit-radial-gradient(white, black)"}},children:l})}):l}var K,G=i(350445),q=i(46584),$=i(926749),Y=i(623568),J=i(965900),Q=i(350118),X=i(167912);const ee=void 0!==K?K:K=i(365885);function te({inAdsVideoExperiment:e,unauthRelatedPinsAutoplayExpGroup:t,isAutoplay:i,cropHeight:n,currentTime:s,onLoad:o,onError:r,onTimeChange:l,pinData:d,playing:u,rootMargin:h,viewType:p,viewParameter:m,onVisibilityChanged:y,trackFullVisible:g,videoDuration:v,imageHeightModifier:b,image:P,isSquarePin:_}){var k,T,w,D;const x=(0,c.ZP)(),[E,L]=(0,a.useState)(!1),[I,A]=(0,a.useState)(!0),{isDownstreamPromotion:R,hasPromoter:V}=d,M=(0,Y.jL)(!!R,!!V),F=M&&!d.isEligibleForWebCloseup,O=3372===m||42===p,j=M&&d.isEligibleForWebCloseup&&!O,{setCurrentVideo:z,pauseAutoplay:B}=(0,J.I)(),H=F||!M,W=(0,q.Z)({onVisibilityChanged:y,inAdsDesktopVideoExperiment:e,trackFullVisible:g,rootMargin:h});let Z=!u;(e||null!=t&&t.startsWith("enabled"))&&(Z=I,i&&u&&I&&A(!1));const{image236xUrl:K,pinId:Q}=d,X=(0,C.HG)()&&d.videos?null===(k=d.videos.videoList)||void 0===k?void 0:k.vHLSV4:null===(T=d.videos)||void 0===T||null===(w=T.videoList)||void 0===w?void 0:w.v720P,ee=(0,C.HG)()&&d.videos?"video/m3u8":"video/mp4",te=(0,a.useCallback)((({event:e})=>{e.preventDefault(),e.stopPropagation(),z({pinId:Q,isPromoted:Boolean(M),currentTime:0}),L(!1)}),[M,Q,z]),ie=(0,a.useCallback)((()=>{M&&L(j),B({pinId:Q,isPromoted:Boolean(M),currentTime:0})}),[j,M,Q,B]);if(!d.videos||!X)return null;const{height:ae,thumbnail:ne,width:se,url:oe}=X||{},re=d.videos.id,le=[{type:ee,src:oe}];let de,ce=(null!=se?se:1)/(null!=ae?ae:1);return e&&_&&(ce=1,de="transparent",b&&(ce-=b-1)),E&&M?(0,f.jsx)(S.xu,{"data-test-id":"pin-video-mobile-end-card",ref:W,children:(0,f.jsx)(G.Z,{backgroundImage:null!=K?K:"",naturalHeight:null!=ae?ae:1,naturalWidth:null!=se?se:1,pinId:Q,onRestartVideo:te})}):Z?(0,f.jsxs)(S.xu,{"data-test-id":"pin-video-mobile-image",ref:W,children:[v&&(0,f.jsx)(N.Z,{text:v}),(0,f.jsx)(U,{imageHeight:null!==(ue=null==P?void 0:P.height)&&void 0!==ue?ue:1,imageWidth:null!==(he=null==P?void 0:P.width)&&void 0!==he?he:1,onError:r,onLoad:o,imageUrl:null!==(pe=null==P?void 0:P.url)&&void 0!==pe?pe:"",isSquarePin:_})]}):(0,f.jsx)(S.xu,{"data-test-id":"pin-video-mobile-video",ref:W,children:(0,f.jsx)($.ZP,{isAutoPlay:!!i,cropHeight:n,rootMargin:h,inAdsDesktopVideoExperiment:e,contextLogData:{viewParameter:m,component:0,objectId:Q,video_id:null!=re?re:"",view:p},accessibilityMaximizeLabel:x.bt("Maximizar", "Maximize", "pinLayouts.PinVideo.accessibilityMaxVideoBtn", undefined, true),accessibilityMinimizeLabel:x.bt("Minimizar", "Minimize", "pinLayouts.PinVideo.accessibilityMinVideoBtn", undefined, true),accessibilityMuteLabel:x.bt("Silenciar", "Mute", "pinLayouts.PinVideo.accessibilityMuteVideoBtn", undefined, true),accessibilityPauseLabel:x.bt("Pausar", "Pause", "pinLayouts.PinVideo.accessibilityPauseVideoBtn", undefined, true),accessibilityPlayLabel:x.bt("Reproducir", "Play", "pinLayouts.PinVideo.accessibilityPlayVideoBtn", undefined, true),accessibilityProgressBarLabel:x.bt("Barra de progreso", "Progress bar", "pinLayouts.PinVideo.accessibilityProgressBarLabel", undefined, true),accessibilityUnmuteLabel:x.bt("Activar sonido", "Unmute", "pinLayouts.PinVideo.accessibilityUnmuteVideoBtn", undefined, true),aspectRatio:ce,backgroundColor:de,captions:"",hlsConfig:{capLevelToPlayerSize:!0,startPosition:s||-1},loop:H,onTimeChange:l,playing:u,onPlay:()=>{},onPlayError:()=>{},poster:null!==(D=null!=K?K:ne)&&void 0!==D?D:"",src:null!=le?le:[],videoStartTime:s,volume:0,onEnded:ie})});var ue,he,pe}const ie=(0,n.Z)({useGraphQLAdapter:e=>{const t=(0,X.useFragment)(ee,e),{entityId:i,isDownstreamPromotion:a,isEligibleForWebCloseup:n,imageSpec_236x:s,videos:o,promoter:r}=t;return{pinId:i,isDownstreamPromotion:a,isEligibleForWebCloseup:n,hasPromoter:!!r,image236xUrl:null==s?void 0:s.url,videos:o?{id:o.entityId,videoList:o.videoList}:null}},useLegacyAdapter:e=>{var t;const i=(0,Q.S6)()(e);if(!i)return null;const{is_downstream_promotion:a,is_eligible_for_web_closeup:n,images:s,videos:o,promoter:r}=i,l=e=>{if(!e)return null;const{duration:t,...i}=e;return i};return{pinId:e,isDownstreamPromotion:a,isEligibleForWebCloseup:n,hasPromoter:!!r,image236xUrl:null==s||null===(t=s["236x"])||void 0===t?void 0:t.url,videos:o?{id:o.id,videoList:(d=o.video_list,d?{v720P:l(d.V_720P),vHLSV4:l(d.V_HLSV4)}:null)}:null};var d}});function ae({pinGraphqlRef:e,pinId:t,...i}){return(0,f.jsx)(ie,{input:e?{enabled:!0,data:e}:{enabled:!1,data:t},children:({data:e})=>e&&(0,f.jsx)(te,{...i,pinData:e})})}var ne;function se(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const oe=void 0!==ne?ne:ne=i(524861);class re extends a.Component{constructor(...e){super(...e),se(this,"calculateCurrentVideoTime",(()=>{const{currentTimeFromPinRep:e,pinData:t,videosAutoplaying:i}=this.props,{pinId:a}=t,n=(0,W.Z)(a,i);return this.currentVideoCurrentTime||n||e})),se(this,"handleVisibilityChanged",(e=>{const{currentTimeFromPinRep:t,pinData:i,setCurrentVideo:a,pauseAutoplay:n,videosAutoplaying:s}=this.props,{pinId:o,isDownstreamPromotion:r,hasPromoter:l}=i,d=(0,Y.jL)(!!r,l),c=(0,Z.Z)(o,s),u=(0,H.Z)(o,s);e?d?a({pinId:o,isPromoted:d,currentTime:this.calculateCurrentVideoTime()}):u&&a({pinId:o,isPromoted:Boolean(d),currentTime:this.calculateCurrentVideoTime()}):!e&&c&&n({pinId:o,isPromoted:Boolean(d),currentTime:t||this.currentVideoCurrentTime})})),se(this,"handleVideoTimeChange",(e=>{const{pinData:t,onTimeChange:i,videosAutoplaying:a}=this.props,{pinId:n}=t;(0,Z.Z)(n,a)&&(this.currentVideoCurrentTime=e.time),i&&i(e)}))}componentDidUpdate(e){const{appInFocus:t}=e,{appInFocus:i,currentTimeFromPinRep:a,pauseAutoplay:n,pinData:s,setCurrentVideo:o,videosAutoplaying:r}=this.props,{pinId:l,isDownstreamPromotion:d,hasPromoter:c}=s,u=(0,Y.jL)(!!d,c),h=(0,Z.Z)(l,r);i!==t&&!i&&h?(this.pausedDueToBrowserOutOfFocus=!0,n({pinId:l,isPromoted:Boolean(u),currentTime:a||this.currentVideoCurrentTime})):this.pausedDueToBrowserOutOfFocus&&i&&(this.pausedDueToBrowserOutOfFocus=!1,o({pinId:l,isPromoted:Boolean(u),currentTime:this.calculateCurrentVideoTime()}))}componentWillUnmount(){const{currentTimeFromPinRep:e,pauseAutoplay:t,pinData:i,videosAutoplaying:a}=this.props,{pinId:n,isDownstreamPromotion:s,hasPromoter:o}=i,r=(0,Y.jL)(!!s,o);(0,Z.Z)(n,a)&&t({pinId:n,isPromoted:Boolean(r),currentTime:e||this.currentVideoCurrentTime})}render(){const{cropHeight:e,isAutoplay:t,pinData:i,videosAutoplaying:a,videoDuration:n,viewParameter:s,viewType:o,onError:r,onLoad:l,inAdsVideoExperiment:d,unauthRelatedPinsAutoplayExpGroup:c,isSquarePin:u,rootMargin:h,imageHeightModifier:p,image:m,isHovering:y}=this.props,{pinId:g,pinGraphqlRef:v}=i,b=(0,W.Z)(g,a),P="enabled_hover"===c,S=(0,Z.Z)(g,a),_=y&&P||S&&t;return(0,f.jsx)(ae,{cropHeight:e,rootMargin:h,currentTime:b,inAdsVideoExperiment:d,unauthRelatedPinsAutoplayExpGroup:c,isAutoplay:t,isSquarePin:u,image:m,viewParameter:s,viewType:o,onTimeChange:this.handleVideoTimeChange,onVisibilityChanged:this.handleVisibilityChanged,pinId:g,playing:_,trackFullVisible:!1,onError:r,onLoad:l,imageHeightModifier:p,videoDuration:n,pinGraphqlRef:v})}}const le=(0,n.Z)({useGraphQLAdapter:e=>{const t=(0,X.useFragment)(oe,e),{entityId:i,isDownstreamPromotion:a,promoter:n}=t;return{pinId:i,isDownstreamPromotion:a,hasPromoter:!!n,pinGraphqlRef:t}},useLegacyAdapter:e=>{const t=(0,Q.S6)()(e);if(!t)return null;const{is_downstream_promotion:i,promoter:a}=t;return{pinId:e,isDownstreamPromotion:i,hasPromoter:!!a,pinGraphqlRef:null}}});function de({pinGraphqlRef:e,pinId:t,...i}){const{appUI:{appInFocus:a,isAutoplay:n,videosAutoplaying:s},pauseAutoplay:o,setCurrentVideo:r}=(0,J.I)();return(0,f.jsx)(le,{input:e?{enabled:!0,data:e}:{enabled:!1,data:t},children:({data:e})=>e&&(0,f.jsx)(re,{...i,pinData:e,appInFocus:a,isAutoplay:n,pauseAutoplay:o,setCurrentVideo:r,videosAutoplaying:s})})}var ce=i(690035),ue=i(19121),he=i(310227),pe=i(773285),me=i(130460),ye=i(780679),ge=i(627995);const ve=({domainLinkData:e})=>{const t=(0,c.ZP)(),i=(0,ye.g)();return(0,f.jsxs)(S.xu,{position:"absolute",top:!0,bottom:!0,left:!0,right:!0,dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(51, 51, 51, 0.8)"}},children:[(0,f.jsx)(S.xu,{position:"absolute",top:!0,bottom:!0,left:!0,right:!0,display:"flex",justifyContent:"center",alignItems:"center",paddingX:2,children:(0,f.jsx)(S.X6,{size:"400",align:"center",color:"light",children:t.bt("Abrir", "Open", "Text on hover of a pin leading to opening this pin in the same tab. This is for users who don't have an account on Pinterest.", undefined, true)})}),!!e&&(0,f.jsx)(S.xu,{position:"absolute",bottom:!0,left:!0,width:"100%",minWidth:"100%",children:(0,f.jsx)(ge.Z,{clickLoggingOptions:e.clickLoggingOptions,domain:e.domain,link:e.link,onClick:e.onClick||(null==i?void 0:i.pinLinkClickHandler)||(()=>{})})})]})};var be,Pe=i(53987);const Se=void 0!==be?be:be=i(843494),_e=({width:e,height:t,minY:i,maxY:a})=>{const n=t=>e<=0||!t?"0%":Math.round(t/e*100)+"%";return{top:i<=0?"0%":n(-1*i*t),bottom:a>=1?"0%":n(-1*(1-a)*t)}},fe=({children:e,margin:t,disableRounding:i})=>(0,f.jsx)(S.xu,{dangerouslySetInlineStyle:{__style:t?{marginTop:t.top,marginBottom:t.bottom}:{}},position:"relative","data-test-id":"pin-visual-wrapper",children:(0,f.jsx)(S.zd,{wash:!0,rounding:i?0:he.mv,children:e})}),ke=({clientTrackingParams:e,color:t,data:i,description:n,domainLinkData:o,image:r,imageAltText:l,imageCrop:d,isPromoted:u,isOneTapExploreLocalTab:h,isSquarePin:p,lazyLoadImage:y,onError:g,oneTapSave:v,onLoad:b,pinId:P,priorityFetchImage:k,disableDefaultContextMenu:T,pinnedToBoardId:w,pinVideo:D,videoUrl:x,productPrice:E,disableRounding:A,storyDataExists:R,title:V,type:M,videoDuration:F,viewType:j,viewParameter:z,unauthRelatedPinsAutoplayExpGroup:H})=>{var W,Z,U,K,G,q,$,J,X,ee,te,ie;const ae=(0,c.ZP)(),ne=(0,ce.Z)(),{checkExperiment:se}=(0,pe.F)(),[oe,re]=(0,a.useState)(!1),{isAuthenticated:le}=(0,I.B)(),he=(0,C.ZP)(),me=(0,Q.S6)()(P),ye=w&&(null==me?void 0:me.savedThisSession),ge="desktop"===he,be=o&&o.link?"with-link":"without-link",Se=!le&&!ge,ke=(0,a.useRef)(Date.now()),Te=(0,a.useRef)(null),we=se("mweb_video_ads_autoplay").anyEnabled,De="video"===M&&(H&&"enabled_hover"===H),xe=(0,m.Z)(),Ee=(0,ue.Z)(),Le=i.shouldOpenInStream,Ce=i.storyPinDataId,Ie=ge?"closeup_auth_dweb_static_image_idea_pin":"closeup_auth_mweb_static_image_idea_pin",Ae=ge?"closeup_unauth_dweb_static_image_idea_pin":"closeup_unauth_mweb_static_image_idea_pin",Re=!!Ce&&!1===Le&&["enabled","enabled_rollout"].includes(se(Ee.isAuth?Ie:Ae,{dangerouslySkipActivation:!0}).group)&&!1===Le,{shouldRenderAsStoryPin:Ve}=function({storyPinDataId:e,shouldShowStaticImageIdeaPin:t}){return e?{shouldLogAsStoryPin:!0,shouldRenderAsStoryPin:!t}:{shouldLogAsStoryPin:!1,shouldRenderAsStoryPin:!1}}({storyPinDataId:Ce,shouldShowStaticImageIdeaPin:Re});(0,a.useEffect)((()=>{De||!oe||le||xe({action:"view",item:"unauth-video-autoplay-on-hover"})}),[De,oe,xe,le]);const Me=(0,f.jsx)(S.Ee,{alt:l||V||n||"",color:t,naturalHeight:null!==(W=r.height)&&void 0!==W?W:1,naturalWidth:null!==(Z=r.width)&&void 0!==Z?Z:1,onError:g,onLoad:b,src:null!==(U=r.url)&&void 0!==U?U:"",fit:p?"cover":void 0,loading:y?"lazy":"auto",fetchPriority:k?"high":"auto"}),Fe=p?(0,f.jsx)(S.xu,{dangerouslySetInlineStyle:{__style:{paddingTop:"calc(100%)"}},children:(0,f.jsx)(S.xu,{top:!0,right:!0,bottom:!0,left:!0,position:"absolute",dangerouslySetInlineStyle:{__style:{WebkitMaskImage:"-webkit-radial-gradient(white, black)"}},children:Me})}):Me,Oe=(0,_.useLocation)(),je=()=>(0,Pe.C$)(Oe)?"homefeed":(0,Pe.L6)(Oe)?"related_pins":(0,Pe.En)(Oe)?"search":"unknown";return(0,f.jsx)("div",{className:"PinCard__imageWrapper",style:{position:"relative"},children:(0,f.jsxs)(S.xu,{onContextMenu:e=>{if("desktop"!==he){const t=je();(0,L.My)((le?"auth":"unauth")+".mweb_pin_feed.pin_image.long_press",{page:t}),"related_pins"!==t&&!se("pcons_enable_context_menu_all_feeds",{dangerouslySkipActivation:!0}).anyEnabled||le||(e.preventDefault(),e.stopPropagation())}},onTouchStart:e=>{if("desktop"!==he){const t=je();if((0,L.My)("unauth.mweb.related_pin.image.touch.start"),("related_pins"===t||se("pcons_enable_context_menu_all_feeds",{dangerouslySkipActivation:!0}).anyEnabled)&&!le&&(null==T||T(),ke.current=Date.now(),e.changedTouches&&e.changedTouches.length>0)){const t=e.changedTouches.item(0);t&&(Te.current={x:t.pageX,y:t.pageY})}}},onTouchEnd:e=>{if("desktop"!==he){const t=je();if((0,L.My)("unauth.mweb.related_pin.image.touch.end"),Date.now()-ke.current>500&&!le&&("related_pins"===t||se("pcons_enable_context_menu_all_feeds").anyEnabled)){const t=Te.current;if(e.changedTouches&&e.changedTouches.length>0&&t){const i=e.changedTouches.item(0);if(i&&Math.pow(i.pageX-t.x,2)+Math.pow(i.pageY-t.y,2)>100)return;null==T||T(),ne({pinId:P,location:"related-pins-long-press"}),e.stopPropagation()}}}},"data-test-id":`pincard-${M}-${be}`,dangerouslySetInlineStyle:{__style:{willChange:"transform",textDecoration:"none"}},overflow:"hidden",onMouseOver:Se?void 0:()=>re(!0),onMouseLeave:Se?void 0:()=>re(!1),position:"relative",rounding:A?0:4,children:[(0,f.jsxs)(O,{clientTrackingParams:e||"",oneTapSave:v,isOneTapExploreLocalTab:h,pinId:P,pinnedToBoardId:w,viewType:j,children:[(()=>{if("gif"===M&&!ye)return(0,f.jsx)(N.Z,{text:ae.bt("GIF", "GIF", "pin.pinCard.gifIconIdentifier", undefined, true)});if("video"===M&&F&&!ye)return(0,f.jsx)(N.Z,{text:F});if("storyPin"===M&&Ve&&R&&!ye){var e,t,a;const n=(null===(e=i.storyPinData)||void 0===e?void 0:e.pageCount)||0,o=(null===(t=i.storyPinData)||void 0===t?void 0:t.staticPageCount)||0,r=(null===(a=i.storyPinData)||void 0===a?void 0:a.totalVideoDuration)||0;if(r>0){const e=r+o*Y.oN;return(0,f.jsx)(N.Z,{text:(0,s.Z)(e)})}if("number"==typeof n&&n>0)return(0,f.jsx)(N.Z,{icon:"idea-pin",text:n.toString()})}return"product"===M&&E?(0,f.jsx)(N.Z,{text:E}):null})(),(0,f.jsx)(fe,{disableRounding:A,margin:d?_e({width:null!==(K=r.width)&&void 0!==K?K:1,height:null!==(G=r.height)&&void 0!==G?G:1,minY:d.minY,maxY:d.maxY}):void 0,children:D&&u&&we&&i||null!=H&&H.startsWith("enabled")&&x&&i?(0,f.jsx)(de,{image:r,inAdsVideoExperiment:we,unauthRelatedPinsAutoplayExpGroup:H,isHovering:oe,isSquarePin:p,onError:g,onLoad:b,pinId:i.entityId,videoDuration:F,viewParameter:z,viewType:j,pinGraphqlRef:null}):Fe})]}),!De&&oe&&!le&&(0,f.jsx)(ve,{domainLinkData:o}),le&&ye&&(0,f.jsx)(B,{boardName:null!==(q=null===($=i.board)||void 0===$?void 0:$.name)&&void 0!==q?q:"",boardUrl:null!==(J=null===(X=i.board)||void 0===X?void 0:X.url)&&void 0!==J?J:"",sectionName:null==v||null===(ee=v.section)||void 0===ee?void 0:ee.title,sectionSlug:null==v||null===(te=v.section)||void 0===te?void 0:te.slug,isQuicksave:"quick_saves"===(null===(ie=i.board)||void 0===ie?void 0:ie.layout)})]})})},Te=(0,n.Z)({useGraphQLAdapter:(e,t)=>(0,X.useFragment)(Se,t),useLegacyAdapter:e=>{var t,i,a;const n=(0,Q.S6)()(e),s=null!==(t=null==n||null===(i=n.pinned_to_board)||void 0===i?void 0:i.id)&&void 0!==t?t:"",o=(0,me.gC)()(s||(n?String(null===(a=n.board)||void 0===a?void 0:a.id):""));return n?{entityId:n.id,board:o&&{entityId:o.id,layout:o.layout,name:o.name,url:o.url},shouldOpenInStream:n.should_open_in_stream,storyPinData:n.story_pin_data&&{pageCount:n.story_pin_data.page_count,staticPageCount:n.story_pin_data.static_page_count,totalVideoDuration:n.story_pin_data.total_video_duration},storyPinDataId:n.story_pin_data_id}:null}}),we=({pinGraphqlRef:e,...t})=>(0,f.jsx)(Te,{input:e?{enabled:!0,data:e}:{enabled:!1,data:t.pinId},children:({data:e})=>e&&(0,f.jsx)(ke,{...t,data:e})})},167525:(e,t,i)=>{i.d(t,{Z:()=>r});var a=i(898781),n=i(643010),s=i(883119),o=i(785893);function r({text:e,icon:t,largeIdentifier:i,largeMargin:r}){const l=(0,a.ZP)();return(0,o.jsxs)(s.xu,{zIndex:new s.Ry(1),alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:(0,n.Yc)()?"rgba(0, 0, 0, 0.7)":"rgba(255, 255, 255, 0.8)"}},display:"flex",margin:r?4:2,overflow:"hidden",position:"absolute",rounding:"pill",padding:2,paddingX:i?4:void 0,height:i?36:24,top:!0,children:[t&&(0,o.jsx)(s.xu,{marginEnd:i?2:1,children:(0,o.jsx)(s.JO,{accessibilityLabel:l.bt("identificador que muestra el tipo de Pin", "identifier that shows the pin type", "pin.pincard.iconAccessibilityLabel", undefined, true),color:"default",icon:t,inline:!0,size:i?18:12})}),(0,o.jsx)(s.xv,{inline:!0,size:i?"200":"100",weight:"bold",children:e})]})}},914142:(e,t,i)=>{i.d(t,{Z:()=>d,j:()=>l});var a=i(898781),n=i(883119),s=i(773285),o=i(349700),r=i(785893);const l=[0,2,3];function d({hasAffiliatedProducts:e,isPromoted:t,sponsorName:i,sponsorshipStatus:d,textColor:c}){const u=(0,a.ZP)(),h=(0,s.F)().checkExperiment("mweb_web_android_ios_clbc_eu_ad_string").anyEnabled;let p;t?p=(0,o.nk)(u.bt("Promocionado por {{ name }}", "Promoted by {{ name }}", "sponsorship.sponsorshipText.promotedByBrand", undefined, true),{name:i}):d||0===d?i&&!l.includes(d)?p=(0,o.nk)(u.bt("Colaboración pagada con {{ name }}", "Paid partnership with {{ name }}", "closeup.creator.sponsoredPinTitle", undefined, true),{name:i}):2!==d&&(p=u.bt("Colaboración pagada", "Paid partnership", "closeup.creator.sponsoredPinTitle", undefined, true)):e&&(p=u.bt("Incluye productos patrocinados", "Includes sponsored products", "sponsorship.sponsorshipText.affiliatedProducts", undefined, true));const m=h&&!t?"Ad • ":"";return(0,r.jsxs)(n.xv,{color:c,size:"100",children:[m,p]})}},364034:(e,t,i)=>{i.d(t,{$:()=>r,Z:()=>l});var a=i(667294),n=i(807609),s=i(844974);const o=e=>{const t=(0,s.qn)(e);if(!t)return null;try{return JSON.parse(t)}catch(i){return null}};const r=2,l=()=>{const[e,t]=function(e){const t=(0,n.Z)(),[i,r]=(0,a.useState)(t?null:o(e));return(0,a.useEffect)((()=>{r(o(e))}),[e]),[i,(0,a.useCallback)((t=>{r(t),null===t?(0,s.L_)(e):(0,s.Nh)(e,JSON.stringify(t))}),[e])]}("unauthSavedPins"),i=null!==(d=null==(l=e)?void 0:l.pins)&&void 0!==d?d:[];var l,d;const c=e=>t((e=>e.length?{pins:e}:null)(e)),u=()=>i.length<r;return{pins:i,save:e=>{u()&&c(i.filter((({id:t})=>t!==e.id)).concat([e]))},unsave:e=>c(i.filter((({id:t})=>t!==e))),isSaved:e=>i.some((({id:t})=>t===e)),clear:()=>c([]),canSaveMore:u}}},662089:(e,t,i)=>{i.d(t,{Z:()=>r});var a=i(702664),n=i(461355),s=i(343341),o=i(639952);function r(){const e=(0,a.useDispatch)(),{showToast:t,showOneToast:i}=(0,s.F9)();return{showToast:t,showOneToast:i,showRepinConfirmation:(i,a)=>{a||e((0,o.WF)()),setTimeout((()=>{a||e((0,o.a5)()),t(i)}),n.z)}}}},177891:(e,t,i)=>{i.d(t,{a:()=>a,k:()=>n});const a=e=>({type:"ONE_TAP_SAVE",payload:e}),n=e=>({type:"ONE_TAP_UNSAVE",payload:e})},850431:(e,t,i)=>{i.d(t,{w:()=>s});var a=i(349741),n=i(956800);const s=({pinId:e,boardId:t,i18n:i,logContextEvent:s,onSuccess:o,onUndo:r,originalPinId:l,showNewUserSavetoProfileAnimation:d,showRepinConfirmation:c,showToast:u,section:h,trackingParams:p,isOneTapSave:m,viewType:y,historyPush:g,suggestedBoardIds:v})=>(b,P)=>{var S,_,f,k,T;const{pins:w,session:D,feeds:x}=P(),E=w[e];t&&((null===(S=null!==(_=null==E?void 0:E.shopping_flags)&&void 0!==_?_:[])||void 0===S?void 0:S.length)>0||null!=E&&E.rich_summary&&(null===(f=null!==(k=null==E||null===(T=E.rich_summary)||void 0===T?void 0:T.products)&&void 0!==k?k:[])||void 0===f?void 0:f.length)>0)&&(x[`board-shop-saved-preview:${t}`]&&b((0,n.Qv)(`board-shop-saved-preview:${t}`,[E],{isPrepend:!0})),x[`board-shop-saved:${t}`]&&b((0,n.Qv)(`board-shop-saved:${t}`,[E],{isPrepend:!0})));return new a.Z({boardId:t,dispatch:b,i18n:i,isLegoSaveStyle:!0,isOneTapSave:m,onSuccess:o,onUndo:r,originalPinId:l,pin:E,resourceName:"RepinResource",section:h,showNewUserSavetoProfileAnimation:d,showRepinToasts:e=>c?c(e):u?u(e):void 0,trackingParams:p,userId:D.userId,viewType:y,historyPush:g,suggestedBoardIds:v}).processRepin(s)}},926749:(e,t,i)=>{i.d(t,{ZP:()=>T});var a=i(667294),n=i(23279),s=i.n(n),o=i(722767);function r(e){const{eventData:{videoEvent:{videoDuration:t,startTime:i,endTime:a,videoStartTime:n,videoEndTime:s,isAudible:o,height:r,width:l,playbackState:d,quartile:c,quartilePercentValue:u,windowHeight:h,windowWidth:p,viewability:m}},component:y,objectId:g,view:v,viewParameter:b,...P}=e;return{component:y,object_id_str:g,view_type:v,view_parameter:b,aux_data:{...P},event_data:{videoEventData:{videoDuration:t,time:i,endTime:a,videoTime:n,endVideoTime:s,isAudible:o,height:r,width:l,playbackState:d,quartile:c,quartilePercentValue:u,windowHeight:h,windowWidth:p,viewability:m}}}}var l=i(121630),d=i(944546),c=i(407043),u=i(158103),h=i(883119),p=i(785893);function m(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const y=[0,.25,.5,.75,.95,.97],g=[0,.5,.8,.99,1],v="-64px 0px 0px 0px",b={rootMargin:v,threshold:g},P={rootMargin:v,threshold:d.iM},S=Object.freeze({LOADING:0,PLAYING:1,PAUSED:2,STALLING:3});function _(){return(new Date).getTime()}function f(e){return!!e.volume&&e.volume>0}class k extends a.Component{constructor(e){super(e),m(this,"videoWrapperRef",(0,a.createRef)()),m(this,"handleWindowResize",(()=>{if(!this.fullscreen){const e=this.getDimensions(),{height:t,width:i}=this.currentInterval;e.height!==t||e.width!==i?this.startNewInterval(e):(this.currentInterval.windowHeight=e.windowHeight,this.currentInterval.windowWidth=e.windowWidth)}})),m(this,"handlePlayheadDown",(({event:e})=>{const{onPlayheadDown:t}=this.props;this.setState({seeking:!0}),t&&t({event:e})})),m(this,"handlePlayheadUp",(({event:e})=>{const{onPlayheadUp:t}=this.props;this.setState({seeking:!1}),t&&t({event:e})})),m(this,"handleLoop",(()=>{this.videoTime=0})),m(this,"handleTimeChange",(e=>{const{seeking:t,ready:i}=this.state;if(!this.currentInterval.videoDuration)return;const a=1e3*e.time,n=function(e,t,i,a){if(e>t)return null;if(i<=0)return null;for(const n of a){const a=n*i;if(e<=a&&t>a)return n}return null}(this.videoTime,a,this.currentInterval.videoDuration,y);if("number"==typeof n&&this.props.playing&&!t&&i){const e=_();this.logVideoEvent(6906,{...this.currentInterval,startTime:e,endTime:e,videoStartTime:0,videoEndTime:0,quartile:Math.floor(4*n),quartilePercentValue:n})}this.videoTime=a,this.props.onTimeChange&&this.props.onTimeChange(e)})),m(this,"handleDurationChange",(e=>{this.currentInterval.videoDuration=1e3*e.duration,this.props.onDurationChange&&this.props.onDurationChange(e)})),m(this,"handleReady",(e=>{const{ready:t}=this.state;t||this.setState({ready:!0}),this.props.onReady&&this.props.onReady(e)})),m(this,"handleEnded",(e=>{this.logFourthQuartileEvent(),this.props.loop&&(this.startNewInterval(),this.currentInterval.videoStartTime=0),this.props.onEnded&&this.props.onEnded(e)})),m(this,"handleVisibilityChange",((e,t)=>{if(0===e.length)return;const i=e.slice(-1)[0],a=function(e,t){for(let i=0;i<t.length;i+=1){const a=t[i],n=t[i+1];if(null==n)return a;if(a<=e&&e<n)return a}return null}(Number.parseFloat(i.intersectionRatio.toFixed(2)),g);"number"==typeof a&&(this.visible=a>=.5),null==a||a===this.currentInterval.viewability||this.fullscreen||(0===a?this.startNewInterval({viewability:a,playbackState:S.PAUSED}):this.startNewInterval({viewability:a}))})),m(this,"handleFullscreenChange",(({event:e,fullscreen:t})=>{if(t){const{height:e,width:t}=window.screen;this.startNewInterval({height:e,width:t,windowHeight:e,windowWidth:t})}else t||this.startNewInterval(this.getDimensions());this.fullscreen=t,this.props.onFullscreenChange&&this.props.onFullscreenChange({event:e,fullscreen:t})})),m(this,"handleClose",(()=>{this.startNewInterval()})),m(this,"handleContextMenu",(e=>{e.preventDefault()})),this.state={ready:!1,seeking:!1};const t=_();this.handleWindowResize=s()(this.handleWindowResize,1e3),this.currentInterval={videoDuration:0,startTime:t,endTime:t,videoStartTime:0,videoEndTime:0,isAudible:f(e),playbackState:this.getPlaybackState(e,this.state),quartile:-1,quartilePercentValue:0,height:null,width:null,windowHeight:null,windowWidth:null,viewability:null},this.videoTime=0,this.fullscreen=!1,this.visible=null}componentDidMount(){this.currentInterval={...this.currentInterval,...this.getDimensions()},window.addEventListener("resize",this.handleWindowResize),window.addEventListener("beforeunload",this.handleClose)}componentDidUpdate(e,t){const i={};f(e)&&!f(this.props)?i.isAudible=!1:!f(e)&&f(this.props)&&(i.isAudible=!0);const a=this.getPlaybackState(this.props,this.state);this.getPlaybackState(e,t)!==a&&(i.playbackState=a),Object.keys(i).length>0&&this.startNewInterval(i)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),window.removeEventListener("beforeunload",this.handleClose),this.startNewInterval()}getPlaybackState(e,t){return t.ready?e.playing&&!t.seeking?S.PLAYING:S.PAUSED:S.LOADING}getDimensions(){let e,t;if(this.videoWrapperRef.current){const i=this.videoWrapperRef.current;i.clientHeight&&i.clientWidth&&(e=i.clientHeight,t=i.clientWidth)}return{height:e,width:t,windowHeight:window.innerHeight,windowWidth:window.innerWidth}}logVideoEvent(e,t){const{closeupStoryPinViewability:i,contextLogData:a,logContextEvent:n}=this.props,{height:s,width:o,windowHeight:l,windowWidth:d,viewability:c,...u}=t;if(null!=s&&null!=o&&null!=l&&null!=d&&null!=c){const t={...u,height:s,width:o,windowHeight:l,windowWidth:d,viewability:i||c};n({event_type:e,...r({...a,view:this.fullscreen?108:a.view,eventData:{videoEvent:t}})})}}logFourthQuartileEvent(){const e=_();this.logVideoEvent(6906,{...this.currentInterval,startTime:e,endTime:e,videoStartTime:0,videoEndTime:0,quartile:4,quartilePercentValue:1})}startNewInterval(e){const t=_();this.logVideoEvent(6904,{...this.currentInterval,endTime:t,videoEndTime:this.videoTime}),this.currentInterval={...this.currentInterval,...e,startTime:t,videoStartTime:this.videoTime,endTime:-1,videoEndTime:-1}}render(){const{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:i,accessibilityPauseLabel:a,accessibilityPlayLabel:n,accessibilityProgressBarLabel:s,accessibilityUnmuteLabel:r,aspectRatio:d,backgroundColor:c,captions:m,contextLogData:y,controls:g,cropHeight:v,hlsConfig:S,inAdsDesktopVideoExperiment:_,isAutoPlay:f,loop:k,objectFit:T,onLoadedChange:w,onControlsPause:D,onControlsPlay:x,onSeek:E,onVolumeChange:L,playbackRate:C,playing:I,playsInline:A,poster:R,preload:V,rootMargin:M,src:F,surface:O,videoStartTime:j,volume:z}=this.props,{seeking:B}=this.state,N=_?P:b;return void 0!==M&&(N.rootMargin=O?(0,l.e)(O):M),(0,p.jsx)(o.Z,{options:N,onVisibilityChange:this.handleVisibilityChange,children:(0,p.jsx)(h.xu,{ref:this.videoWrapperRef,onContextMenu:this.handleContextMenu,dangerouslySetInlineStyle:{__style:v?{display:"flex",alignItems:"center",height:`${v}px`}:{}},children:(0,p.jsx)(u.default,{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:i,accessibilityPauseLabel:a,accessibilityPlayLabel:n,accessibilityProgressBarLabel:s,accessibilityUnmuteLabel:r,aspectRatio:v?236/v:d,backgroundColor:c,captions:m,contextLogData:y,controls:g,hlsConfig:S,isAutoPlay:f,loop:k,objectFit:T,onDurationChange:this.handleDurationChange,onEnded:this.handleEnded,onFullscreenChange:this.handleFullscreenChange,onLoadedChange:w,onLoop:this.handleLoop,onControlsPause:D,onControlsPlay:x,onPlayheadDown:this.handlePlayheadDown,onPlayheadUp:this.handlePlayheadUp,onReady:this.handleReady,onSeek:E,onTimeChange:this.handleTimeChange,onVolumeChange:L,playbackRate:C,playing:!B&&I,onPlay:()=>{},onPlayError:()=>{},playsInline:A,poster:R,preload:V,src:F,videoStartTime:j,visible:this.visible,volume:z})})})}}function T(e){const{logContextEvent:t}=(0,c.v)();return(0,p.jsx)(k,{...e,logContextEvent:t})}m(k,"defaultProps",h.nk.defaultProps)},158103:(e,t,i)=>{i.r(t),i.d(t,{VideoWrapper:()=>f,default:()=>k,getPlaylistSourceSrc:()=>_});var a=i(667294),n=i(19121),s=i(965900),o=i(407043),r=i(773285),l=i(858416),d=i(780280),c=i(883119),u=i(969315),h=i(179888),p=i(785893);function m(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function y(e,t){if(!e||void 0===e)return"undefined";if("string"==typeof e){let i=e;if(t){const a="control"===t?"v3.pinimg.com":"v2.pinimg.com";i=e.replace("v1.pinimg.com",a)}return i}if(Array.isArray(e)&&e[0].src){let i=e[0].src;if(t){const e="control"===t?"v3.pinimg.com":"v2.pinimg.com";i=i.replace("v1.pinimg.com",e)}return i}return"unsupported_type_"+typeof e}class g extends a.Component{constructor(...e){super(...e),m(this,"state",{canPlayVideo:!1,playbackState:h.Cy.DEFAULT}),m(this,"errorRetryCount",2),m(this,"hasSegmentStarted",!1),m(this,"hasPlaybackStarted",!1),m(this,"hasVideoSessionStarted",!1),m(this,"hasVideoSessionEnded",!1),m(this,"lastStallTime",null),m(this,"lastPauseTime",null),m(this,"logSessionStartOnNextPlay",!1),m(this,"playerId",""),m(this,"videoSessionId",""),m(this,"videoVisibleTime",null),m(this,"playbackPerformance",{canPlayTime:null,detailedErrors:"",errorCode:0,errorName:"",errorReason:"",hasFatalError:!1,loadStartTime:null,numberOfStalls:0,numberOfSeeks:0,playbackStartTimestamp:null,segments:[],srcString:y(this.props.src,this.props.quicExpGroup),totalStallDurationMs:0,totalPauseDurationMs:0}),m(this,"componentDidMount",(()=>{const{contextLogData:e={},playing:t}=this.props,{is_closeup_video:i=!1}=e;(0,u.tE)("videoMounted",!1,i),t&&(this.videoVisibleTime=new Date,this.logPlaybackPerformance(h.DR,{initiator:"mount"}))})),m(this,"componentDidUpdate",(e=>{const{playing:t,visible:i,appInFocus:a}=this.props;e.appInFocus&&!a&&(this.logPlaybackPerformance(h.$f,{initiator:"update"}),this.logSessionStartOnNextPlay=!0),e.visible&&!1===i&&(this.logSessionStartOnNextPlay=!1,this.updatePauseDuration(),this.logPlaybackPerformance(h.$f,{initiator:"update"})),!1===e.visible&&!0===i&&(this.videoVisibleTime=this.videoVisibleTime||new Date,t?(this.setPlaybackStartTime(),this.setLastSegmentStartPlayTime(),this.setLastSegmentPlaybackStartDate(),this.logPlaybackPerformance(h.DR,{initiator:"update"})):this.logSessionStartOnNextPlay=!0),t&&a&&this.logSessionStartOnNextPlay&&(this.setPlaybackStartTime(),this.setLastSegmentStartPlayTime(),this.setLastSegmentPlaybackStartDate(),this.logPlaybackPerformance(h.DR,{initiator:"update"}),this.logSessionStartOnNextPlay=!1)})),m(this,"addSegment",(()=>{const{canPlayTime:e,loadStartTime:t,segments:i,srcString:a}=this.playbackPerformance;let n=-1;e&&t&&0===i.length&&(n=e>t?e-t:0);const s=this.videoPlayerRef&&this.videoPlayerRef.video,o={indicatedKbps:-1,duration:s&&s.duration*h.gJ||-1,lastStartPlayTime:null,level:-1,numServerAddressChange:-1,observedKbps:-1,playbackStartDate:null,serverAddress:"",sourceWidth:-1,sourceHeight:-1,startupTimeMs:n,switchBitrateKbps:-1,uri:a,viewportWidth:s&&s.clientWidth||-1,viewportHeight:s&&s.clientHeight||-1,watchedDurationMs:0};i.push(o)})),m(this,"getCurrentVideoTime",(()=>this.videoPlayerRef&&this.videoPlayerRef.video?this.videoPlayerRef.video.currentTime*h.gJ:0)),m(this,"getVideoResourceTiming",(()=>{var e,t;if(null!==(e=window)&&void 0!==e&&null!==(t=e.performance)&&void 0!==t&&t.getEntriesByName&&this.playbackPerformance.srcString){const e=window.performance.getEntriesByName(this.playbackPerformance.srcString);return e.length>0&&e[0]||null}return null})),m(this,"handleCanPlayVideo",(e=>{const{contextLogData:t={},onReady:i,playing:a}=this.props,{is_closeup_video:n=!1}=t,{canPlayVideo:s}=this.state;(0,u.tE)("handleCanPlayVideo",!1,n,{firstCanPlayEvent:!s,playing:a}),this.playbackPerformance.hasFatalError=!1,s||(this.playbackPerformance.canPlayTime=new Date),this.setState({canPlayVideo:!0}),i&&i(e)})),m(this,"handleEnded",(e=>{const{loop:t,onEnded:i}=this.props,{segments:a}=this.playbackPerformance,n=a&&a[a.length-1];t&&this.videoPlayerRef&&this.videoPlayerRef.video?(this.updateWatchDurationForCurrentSegment(),n&&(n.lastStartPlayTime=0),this.hasSegmentStarted=!1):t||this.logPlaybackPerformance(h.$f,{initiator:"videoEnded",loop:t}),this.setState({playbackState:h.Cy.ENDED}),i&&i(e)})),m(this,"handleError",(()=>{var e,t,i,a,n,s,o,r;const{contextLogData:l={}}=this.props,{is_closeup_video:d=!1}=l,c=this.videoPlayerRef&&this.videoPlayerRef.video;(null==c||null===(e=c.error)||void 0===e?void 0:e.code)!==h.lG.MEDIA_ERR_ABORTED&&(this.playbackPerformance.hasFatalError=!0),this.playbackPerformance.detailedErrors+=`${this.playbackPerformance.detailedErrors.length>0?", ":""}${(null==c||null===(t=c.error)||void 0===t?void 0:t.message)||""}`,this.playbackPerformance.errorCode=(null==c||null===(i=c.error)||void 0===i?void 0:i.code)||0,this.playbackPerformance.errorName=(null==c||null===(a=c.error)||void 0===a||null===(n=a.message)||void 0===n?void 0:n.slice(0,100))||"unknown",this.playbackPerformance.errorReason=(null==c||null===(s=c.error)||void 0===s||null===(o=s.message)||void 0===o?void 0:o.slice(0,100))||"unknown";const p={errorName:this.playbackPerformance.errorCode,errorReason:this.playbackPerformance.errorName,errorRetryCount:this.errorRetryCount,playbackState:this.state.playbackState,networkState:(null==c?void 0:c.networkState)||"unknown"};switch((0,u.tE)("fatalError",!1,d,p),null==c||null===(r=c.error)||void 0===r?void 0:r.code){case h.lG.MEDIA_ERR_ABORTED:break;case h.lG.MEDIA_ERR_NETWORK:case h.lG.MEDIA_ERR_DECODE:case h.lG.MEDIA_ERR_SRC_NOT_SUPPORTED:default:this.errorRetryCount>0&&(null==c||c.load(),this.errorRetryCount-=1)}this.updateWatchDurationForCurrentSegment(),this.setState({playbackState:h.Cy.FAILED})})),m(this,"handleLoadedMetadata",(()=>{this.setState({playbackState:h.Cy.LOADED_METADATA})})),m(this,"handleLoadStart",(()=>{this.playbackPerformance.loadStartTime=new Date,this.setState({playbackState:h.Cy.LOAD_START})})),m(this,"handleLoadedData",(()=>{this.setState({playbackState:h.Cy.LOADED_DATA})})),m(this,"handlePlaying",(()=>{this.playbackPerformance.hasFatalError=!1,this.setPlaybackStartTime(),this.hasSegmentStarted||this.addSegment(),this.setLastSegmentStartPlayTime(),this.setLastSegmentPlaybackStartDate(),this.updateStallDuration(),this.updatePauseDuration(),this.setState({playbackState:h.Cy.PLAYING}),this.props.clearSeekTime&&this.props.clearSeekTime()})),m(this,"handleUserPause",(e=>{const{onControlsPause:t}=this.props;this.lastPauseTime=new Date,t&&t(e)})),m(this,"handleVideoPause",(()=>{this.state.playbackState!==h.Cy.STALLING&&this.state.playbackState!==h.Cy.SEEKING&&(this.updateWatchDurationForCurrentSegment(),this.lastPauseTime||this.updateStallDuration()),this.setState({playbackState:h.Cy.PAUSED})})),m(this,"handleSeeking",(()=>{this.playbackPerformance.numberOfSeeks+=1;const{segments:e}=this.playbackPerformance,t=e&&e[e.length-1];t&&(t.lastStartPlayTime=null),this.state.playbackState!==h.Cy.ENDED&&this.setState({playbackState:h.Cy.SEEKING})})),m(this,"handleStalled",(()=>{null===this.lastStallTime&&this.state.playbackState!==h.Cy.ENDED&&(this.lastStallTime=new Date,this.playbackPerformance.numberOfStalls+=1,this.setState({playbackState:h.Cy.STALLING}))})),m(this,"handleTimeUpdate",(e=>{const{onTimeChange:t}=this.props;t&&t(e),this.state.playbackState===h.Cy.PLAYING&&(this.updateWatchDurationForCurrentSegment(),this.setLastSegmentStartPlayTime())})),m(this,"resetPlaybackMetrics",(()=>{this.hasSegmentStarted=!0,this.hasPlaybackStarted=!1,this.hasVideoSessionStarted=!1,this.hasVideoSessionEnded=!0,this.lastStallTime=null,this.lastPauseTime=null,this.videoSessionId="",this.videoVisibleTime=null,this.logSessionStartOnNextPlay=!1;const e={...this.playbackPerformance.segments[this.playbackPerformance.segments.length-1],lastStartPlayTime:null,playbackStartDate:null,watchedDurationMs:0};this.playbackPerformance.detailedErrors="",this.playbackPerformance.errorCode=0,this.playbackPerformance.errorName="",this.playbackPerformance.errorReason="",this.playbackPerformance.hasFatalError=!1,this.playbackPerformance.numberOfStalls=0,this.playbackPerformance.numberOfSeeks=0,this.playbackPerformance.playbackStartTimestamp=null,this.playbackPerformance.totalStallDurationMs=0,this.playbackPerformance.segments=[e]})),m(this,"setLastSegmentStartPlayTime",(()=>{const{segments:e}=this.playbackPerformance,t=e&&e[e.length-1];t&&null===t.lastStartPlayTime&&(t.lastStartPlayTime=this.getCurrentVideoTime())})),m(this,"setLastSegmentPlaybackStartDate",(()=>{const{segments:e}=this.playbackPerformance,t=e&&e[e.length-1];t&&null===t.playbackStartDate&&(t.playbackStartDate=Date.now())})),m(this,"setPlaybackStartTime",(()=>{this.hasPlaybackStarted||(this.playbackPerformance.playbackStartTimestamp=Date.now(),this.hasPlaybackStarted=!0)})),m(this,"setVideoPlayerRef",(e=>{const{setVideoRef:t}=this.props;if(e&&(t&&t(e),this.videoPlayerRef=e,this.videoPlayerRef.video)){const e=this.videoPlayerRef.video;e.addEventListener("loadedmetadata",this.handleLoadedMetadata),e.addEventListener("loadeddata",this.handleLoadedData),e.addEventListener("pause",this.handleVideoPause),e.readyState>=3&&(this.setState({canPlayVideo:!0}),this.playbackPerformance.canPlayTime=new Date)}})),m(this,"updateStallDuration",(()=>{if(null!==this.lastStallTime){const e=this.lastStallTime;this.playbackPerformance.totalStallDurationMs+=new Date-e,this.lastStallTime=null}})),m(this,"updatePauseDuration",(()=>{if(null!==this.lastPauseTime){const e=this.lastPauseTime;this.playbackPerformance.totalPauseDurationMs+=new Date-e,this.lastPauseTime=null}})),m(this,"updateWatchDurationForCurrentSegment",(()=>{const{segments:e}=this.playbackPerformance,t=e&&e[e.length-1],i=t?t.lastStartPlayTime:null,a=this.getCurrentVideoTime();if(t&&null!==i&&"number"==typeof a&&"number"==typeof i){const e=a-i;e>0&&(t.watchedDurationMs+=e,t.lastStartPlayTime=null)}})),m(this,"logPlaybackPerformance",((e,t)=>{const{contextLogData:i={},userId:a,isAutoPlay:n,logContextEvent:s}=this.props,{is_closeup_video:o=!1}=i,{canPlayTime:r,detailedErrors:l,errorCode:d,errorName:c,errorReason:p,hasFatalError:m,loadStartTime:y,totalPauseDurationMs:g,totalStallDurationMs:v,numberOfStalls:b,numberOfSeeks:P,playbackStartTimestamp:S,segments:_,srcString:f}=this.playbackPerformance,k=this.videoPlayerRef&&this.videoPlayerRef.video,T=e===h.DR,w=T&&!this.hasVideoSessionStarted,D=!T&&!this.hasVideoSessionEnded&&this.hasVideoSessionStarted;if(k&&(w||D)){var x;let w=-1;r&&y&&(w=r>y?r-y:0);let D=-1;r&&this.videoVisibleTime&&(D=r>this.videoVisibleTime?r-this.videoVisibleTime:0),T&&(this.videoSessionId=(0,h.Y7)(a),this.playerId=this.playerId||(0,h.EB)());const E=this.getVideoResourceTiming(),L={averageVideoKbps:-1,autoplaying:n,detailedErrors:l,downloadedKiloBytes:"number"==typeof(null==E?void 0:E.decodedBodySize)&&E.decodedBodySize/h.Fm||0,errorCode:d,errorName:c,errorReason:p,fatalError:m,isCellular:!1,nativeVideoDurationMs:k.duration*h.gJ||-1,numberOfStalls:b,numberOfSeeks:P,overallPausedDurationMs:g,overallBufferDurationMs:v,overallWatchedDurationMs:-1,rebufferRate:-1,playbackSessionId:this.videoSessionId,playbackStartTimestamp:S||-1,segments:[],sessionMark:e,screenPixelScale:null!==(x=window)&&void 0!==x&&x.devicePixelRatio?window.devicePixelRatio:-1,startupPlayerWidth:k.clientWidth,startupPlayerHeight:k.clientHeight,startupTimeMs:w,startupLatencyMs:D,startupVariantKbps:-1,startupVariantWatchedDurationMs:-1,startupVariantWidth:k.videoWidth,startupVariantHeight:k.videoHeight,videoUrl:f};if(!T){this.updateWatchDurationForCurrentSegment(),this.updateStallDuration();const e=_.reduce(((e,t)=>e+(t.watchedDurationMs||0)),0);L.overallWatchedDurationMs=e,L.startupVariantWatchedDurationMs=e,L.segments=this.playbackPerformance.segments,0===e?(L.errorName="invalid_watch_duration",L.rebufferRate=-1):L.rebufferRate=v/e}(0,u.ZP)(L,!1,o,{playbackState:this.state.playbackState,...t});const{view:C,viewParameter:I,component:A,element:R,objectId:V,...M}=i;s({event_type:3606,event_data:{videoPerformanceData:L},view_type:C,view_parameter:I,component:A,element:R,object_id_str:V,aux_data:{...M,is_closeup_video:o,playback_session_id:this.videoSessionId}}),T?(this.hasVideoSessionStarted=!0,this.hasVideoSessionEnded=!1):this.resetPlaybackMetrics(),(0,u.tE)(T?"sessionStart":"sessionEnd",!1,o,{playbackState:this.state.playbackState,...t})}}))}componentWillUnmount(){const{loop:e}=this.props;this.updatePauseDuration(),this.logPlaybackPerformance(h.$f,{initiator:"unmount",loop:e})}render(){const{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:i,accessibilityPauseLabel:a,accessibilityPlayLabel:n,accessibilityProgressBarLabel:s,accessibilityUnmuteLabel:o,aspectRatio:r,captions:l,controls:d,loop:u,loopOverride:h,objectFit:m,onDurationChange:g,onFullscreenChange:v,onLoadedChange:b,onControlsPlay:P,onPlayheadDown:S,onPlayheadUp:_,onSeek:f,onVolumeChange:k,playbackRate:T,playing:w,playsInline:D,poster:x,preload:E,src:L,videoStartTime:C,volume:I}=this.props,{canPlayVideo:A}=this.state;return(0,p.jsx)(c.nk,{autoplay:A&&w,accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:i,accessibilityPauseLabel:a,accessibilityPlayLabel:n,accessibilityProgressBarLabel:s,accessibilityUnmuteLabel:o,aspectRatio:r,captions:l,controls:d,loop:void 0===h?u:h,objectFit:m,onDurationChange:g,onEnded:this.handleEnded,onError:this.handleError,onFullscreenChange:v,onLoadedChange:b,onLoadStart:this.handleLoadStart,onControlsPause:this.handleUserPause,onControlsPlay:P,onPlaying:this.handlePlaying,onPlayheadDown:S,onPlayheadUp:_,onReady:this.handleCanPlayVideo,onSeek:f,onSeeking:this.handleSeeking,onStalled:this.handleStalled,onTimeChange:this.handleTimeUpdate,onVolumeChange:k,onWaiting:this.handleStalled,playbackRate:T,onPlay:()=>{},onPlayError:()=>{},playing:A&&w,playsInline:D,poster:x,preload:E,ref:this.setVideoPlayerRef,src:y(L,this.props.quicExpGroup),startTime:C||void 0,volume:I})}}const v=(0,a.memo)((function(e){const{logContextEvent:t}=(0,o.v)(),{country:i,isAuthenticated:a,isBot:c,isSocialBot:h,unauthId:m,userAgent:y}=(0,d.B)(),{browserName:v,browserVersion:b,isMobile:P}=y,{contextLogData:S={}}=e,{is_closeup_video:_=!1,view:f,viewParameter:k}=S,{appUI:{appInFocus:T}}=(0,s.I)(),{checkExperiment:w}=(0,r.F)(),{clearSeekTime:D}=(0,l.RC)();let x=null;a&&(x=w("web_video_quic").group.length?w("web_video_quic").group:null);const E=(0,n.Z)(),L={browserName:v,browserVersion:b,country:i,isAuthenticated:a,isBot:c,is_closeup_video:_,isMobile:P,isSocialBot:h,view:f,viewParameter:k};return(0,u.r$)(L),(0,p.jsx)(g,{...e,userId:E.id||m,appInFocus:T,quicExpGroup:x,logContextEvent:t,clearSeekTime:D})}));var b=i(562559),P=i(366284);function S(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const _=e=>{if(Array.isArray(e)){const t=e.find((e=>"video/m3u8"===e.type));return t?t.src:void 0}return RegExp("m3u8$").test(e)?e:void 0};class f extends a.PureComponent{constructor(e){super(e),S(this,"componentDidUpdate",((e,t)=>{var i;e.videoStartTime&&this.props.videoStartTime&&e.videoStartTime<this.props.videoStartTime&&null!==(i=this.videoPlayerRef)&&void 0!==i&&i.video&&(this.videoPlayerRef.video.currentTime=this.props.videoStartTime)})),S(this,"setVideoPlayerRef",(e=>{e&&(this.videoPlayerRef=e)})),S(this,"handleOnEnded",(({event:e})=>{const{loop:t,onLoop:i,onEnded:a}=this.props;a&&(a({event:e}),this.videoPlayerRef&&this.videoPlayerRef.video&&t&&(this.videoPlayerRef.video.play(),i&&i()))}));const t=_(e.src);this.state={useHlsVideo:!e.preferMp4&&!(0,P.G6)(e.requestContext.userAgent.browserName)&&!!t}}render(){const{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:i,accessibilityPauseLabel:a,accessibilityPlayLabel:n,accessibilityProgressBarLabel:s,accessibilityUnmuteLabel:o,aspectRatio:r,appInFocus:l,backgroundColor:d,captions:c,contextLogData:u,controls:h,hlsConfig:m,isAutoPlay:y,loop:g,objectFit:P,onDurationChange:S,onEnded:f,onFullscreenChange:k,onLoadedChange:T,onControlsPause:w,onControlsPlay:D,onPlayheadDown:x,onPlayheadUp:E,onReady:L,onSeek:C,onTimeChange:I,onVolumeChange:A,playbackRate:R,playing:V,playsInline:M,poster:F,preferMp4:O,preload:j,src:z,videoStartTime:B,visible:N,volume:H}=this.props,{useHlsVideo:W}=this.state,Z=_(z),U={...m,startPosition:B||-1},K=!f&&g;return W&&Z?(0,p.jsx)(b.Z,{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:i,accessibilityPauseLabel:a,accessibilityPlayLabel:n,accessibilityProgressBarLabel:s,accessibilityUnmuteLabel:o,aspectRatio:r,appInFocus:l,backgroundColor:d,captions:c,contextLogData:u,controls:h,hlsConfig:U,isAutoPlay:y,loop:g,loopOverride:K,onDurationChange:S,onEnded:this.handleOnEnded,onFullscreenChange:k,onLoadedChange:T,onControlsPause:w,onControlsPlay:D,onPlayheadDown:x,onPlayheadUp:E,onReady:L,onSeek:C,onTimeChange:I,onVolumeChange:A,playbackRate:R,onPlay:()=>{},onPlayError:()=>{},playing:V,playsInline:M,poster:F,preload:j,setVideoRef:this.setVideoPlayerRef,src:Z,visible:N,volume:H}):(0,p.jsx)(v,{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:i,accessibilityPauseLabel:a,accessibilityPlayLabel:n,accessibilityProgressBarLabel:s,accessibilityUnmuteLabel:o,aspectRatio:r,captions:c,contextLogData:u,controls:h,isAutoPlay:y,loop:g,loopOverride:K,objectFit:P,onDurationChange:S,onEnded:this.handleOnEnded,onFullscreenChange:k,onLoadedChange:T,onControlsPause:w,onControlsPlay:D,onPlayheadDown:x,onPlayheadUp:E,onReady:L,onSeek:C,onTimeChange:I,onVolumeChange:A,playbackRate:R,onPlay:()=>{},onPlayError:()=>{},playing:V,playsInline:M,poster:F,preload:j,setVideoRef:this.setVideoPlayerRef,src:O?z:Z||z,videoStartTime:B,visible:N,volume:H})}}function k(e){const{appUI:{appInFocus:t}}=(0,s.I)(),i=(0,d.B)();return(0,p.jsx)(f,{...e,appInFocus:t,requestContext:i})}},944546:(e,t,i)=>{i.d(t,{HJ:()=>n,VS:()=>a,iM:()=>s});const a=2,n="V_HLSV3_MOBILE",s=[0,.01,.02,.03,.04,.05,.06,.07,.08,.09,.1,.11,.12,.13,.14,.15,.16,.17,.18,.19,.2,.21,.22,.23,.24,.25,.26,.27,.28,.29,.3,.31,.32,.33,.34,.35,.36,.37,.38,.39,.4,.41,.42,.43,.44,.45,.46,.47,.48,.49,.5,.51,.52,.53,.54,.55,.56,.57,.58,.59,.6,.61,.62,.63,.64,.65,.66,.67,.68,.69,.7,.71,.72,.73,.74,.75,.76,.77,.78,.79,.8,.81,.82,.83,.84,.85,.86,.87,.88,.89,.9,.91,.92,.93,.94,.95,.96,.97,.98,.99,1]}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/9991.es_419-28000cbeab90a5e6.mjs.map